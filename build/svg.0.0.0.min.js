!function(t,r){"function"==typeof define&&define.amd?define(r):"object"==typeof exports?exports.svg=r():t.svg=r()}(this,function(){var t=function(){function t(n,i){n&&"[object String]"===Object.prototype.toString.call(n)?this.dom=r.document.createElementNS(t.prototype.svg_ns,n):null!==n&&(this.dom=n),i&&i.appendChild(this.dom)}var r={window:window,document:window.document};return t.prototype.version="0.0.0",t.prototype.svg_ns="http://www.w3.org/2000/svg",t.prototype.xlink_ns="http://www.w3.org/1999/xlink",t.prototype.xml_ns="http://www.w3.org/2000/xmlns/",t.prototype.clear=function(){for(;this.dom.firstChild;)this.dom.removeChild(this.dom.firstChild);return this},t.prototype.remove=function(){this.clear(),this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom)},t.prototype.clone=function(){var r=this.dom.parentNode,n=(this.dom.tagName.toLowerCase(),this.dom.cloneNode(!0));r&&r.appendChild(n);var i=new t(n);for(var o in this)if(Object.prototype.hasOwnProperty.call(this,o)){if(void 0!==t.prototype.plugin.has[o])continue;i[o]=this[o]}return i},t.prototype.extend=function(r){r(t,t.prototype.util)},t.prototype.plugin=function(r,n){var i=Object.prototype.hasOwnProperty,o=r(t,t.prototype.util);i.call(o,"name")!==!1&&i.call(o,"constructor")!==!1&&(void 0===n&&(n=!1),(t.prototype.plugin.has[o.name]!==!0||n!==!1)&&(t.prototype.plugin.has[o.name]=!0,Object.defineProperty(t.prototype,o.name,{get:function(){var t=new o.constructor(this);return Object.defineProperty(this,o.name,{value:t,writable:!0,configurable:!0,enumerable:!0}),t},set:function(){},configurable:!0,enumerable:!0})))},t.prototype.plugin.has={},new t}();return function(t){function r(){}t.__proto__.util=r,r.regex={points:/[, ]/},r.is=function(t,r){if(void 0===t||null===t)return!1;var n=Object.prototype.toString.call(t).toLowerCase(),i="[object ",o=n.substring(i.length,i.length+r.length);return o===r},r.toNum=function(t){if(null===t)return null;var r=+t;return isNaN(+t)?t:r},r.mixin=function(t,r,n){n=void 0===n?!1:n;for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n||!Object.prototype.hasOwnProperty.call(t,i))&&(t[i]=r[i]);return t},r.mixinUsingFunc=function(t,r,n){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=n(t,r,i));return t},r.mixinFromExports=function(t,r,n,i){if(!n||"[object Array]"!=Object.prototype.toString.call(n)){i=void 0===i?!1:i;var o,e,s=n.length;for(o=0;s>o;++o)e=n[o],Object.prototype.hasOwnProperty.call(r,e)&&(i||!Object.prototype.hasOwnProperty.call(t,e))&&(t[e]=r[e]);return t}}}(t),t.extend(function(t,r){function n(){}function i(t){return 0>t?0:t>255?255:t}t.prototype.color=new n,n.prototype.rgb2hex=function(t,r,n){var o=["#",0,0,0];return o[1]=Number.prototype.toString.call(i(t),16),o[2]=Number.prototype.toString.call(i(r),16),o[3]=Number.prototype.toString.call(i(n),16),Array.prototype.join.call(o,"")},n.prototype.hex2rgb=function(t){return t="#"===t.charAt(0)?t.substring(1,7):t,{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16)}},n.prototype.asHex=function(t,i,o){if(void 0===t)return null;if(r.is(t,"string"))return"#"!==a.charAt(0)&&(t="#"+t),t;if(void 0!==i&&void 0!==o)return n.prototype.rgb2hex(t,i,o)}}),t.extend(function(t,r){function n(t,r,n){if(void 0===t)return this;var i=r;if(this.attrMunger){var o=this.attrMunger(t,r);o.munged&&(i=o.value)}return void 0===i?this:(void 0===n||null===n?this.dom.setAttribute(t,i):this.dom.setAttributeNS(n,t,i),this)}function i(t,i,o){if(void 0===t)return function(){for(var t,r,n=[],i=this.dom.attributes.length,o=0;i>o;++o)t=this.dom.attributes[o].name,r=this.dom.attributes[o].value,n.push([t,r]);return n}.call(this);if(r.is(t,"object")){o=void 0!==i?i:null;for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.call(this,e,t[e],o);return this}if(r.is(t,"string")){if(void 0===i){var s=this.dom.attributes[t];return null!==s&&void 0!==s?s.value:null}return void 0===o&&(o=null),n.call(this,t,i,o),this}if(r.is(t,"array")){for(var s={},u=t.length,a=0;u>a;++a){var c=this.dom.attributes[t[a]];void 0!==c&&null!==c&&null!==c.value&&(s[t[a]]=c.value)}return s}}t.prototype.attr=i,i._defineProperty=function(t,r,n,i){return Object.defineProperty(t,r,{get:n,set:i,configurable:!0,enumerable:!0}),t},i.DirectAccessNoFunction=function(t,n,o){void 0===o&&(o=t);for(var e=n.length,s=0;e>s;++s)!function(n){var e=!1;"+"===n.charAt(0)&&(e=!0,n=n.substring(1)),i._defineProperty(t,n,function(){return e?r.toNum(o.attr(n)):o.attr(n)},function(t){return o.attr(n,t),o})}(n[s])},i.DirectAccess=function(t,n,i){void 0===i&&(i=t);for(var o=n.length,e=0;o>e;++e){var s=!1,u=n[e];"+"===u.charAt(0)&&(s=!0,u=u.substring(1)),t[u]=function(t,n){return function(o){return void 0===o?n?r.toNum(i.attr(t)):i.attr(t):(i.attr(t,o),i)}}(u,s)}}}),t.plugin(function(t,r){function n(t){function n(t){return null!==t.attr("cx")}function i(t){return null!==t.attr("rx")}var o=["+x","+y","+width","+height","+rx","+ry","+r","+cx","+cy"];return t.attr.DirectAccessNoFunction(this,o,t),this.pos=function(i,o){return n(t)?void 0===i?{cx:r.toNum(t.attr("cx")),cy:r.toNum(t.attr("cy"))}:(t.attr({cx:i,cy:o}),t):void 0===i?{x:r.toNum(t.attr("x")),y:r.toNum(t.attr("y"))}:(t.attr({x:i,y:o}),t)},this.size=function(o,e){return i(t)?void 0===o?{rx:r.toNum(t.attr("rx")),ry:r.toNum(t.attr("ry"))}:(t.attr({rx:o,ry:e}),t):n(t)?void 0===o?{r:r.toNum(t.attr("r"))}:(t.attr({r:o}),t):void 0===o?{width:r.toNum(t.attr("width")),height:r.toNum(t.attr("height"))}:(t.attr({width:o,height:e}),t)},this.move=function(i,o){if(void 0===i)return null;if(null!==t.attr("points"));else if(null!==t.attr("x1")){var e=t.attr(["x1","y1","x2","y2"]);return e.x1=r.toNum(e.x1)+i,e.y1=r.toNum(e.y1)+o,e.x2=r.toNum(e.x2)+i,e.y2=r.toNum(e.y2)+o,t.attr(e),t}var e=this.pos();return t.attr(n(t)?{cx:i+e.cx,cy:o+e.cy}:{x:i+e.x,y:o+e.y}),t},this}return{name:"shape",constructor:function(t){return n.call(this,t),this}}}),t.plugin(function(){function t(t){return this.translate=function(){return t},this}return{name:"transform",constructor:function(r){return t.call(this,r),this}}}),t.plugin(function(t,r){function n(t){var r=function(r){return t.attr("style",r)};return i.call(r,t),r}function i(t){function n(t){return 0>t&&(t=0),t>1&&(t=1),t}function i(t,i){if(void 0===i){var i=this.attr(t);return null!=i?r.toNum(i):null}return i=n(r.toNum(i)),this.attr(t,i),this}function o(t,n){var i;return void 0===n?(i=this.attr(t),null===i?null:i=i.split(" ").map(function(t){return r.toNum(t)})):(i=r.is(n,"array")?n.join(" "):n,this.attr(t,i),this)}function e(r){return t.attr("stroke",r)}function s(r){return t.attr("fill",r)}this.stroke=e,e.width=function(n){return r.toNum(t.attr("stroke-width",n))},e.opacity=function(r){return i.call(t,"stroke-opacity",r)},e.dasharray=function(r){return o.call(t,"stroke-dasharray",r)},this.fill=s,s.opacity=function(r){return i.call(t,"fill-opacity",r)}}return{name:"style",constructor:n}}),t.plugin(function(t){function r(){return this.parse=function(r){function n(t){return t.charAt(0).toUpperCase()+t.slice(1)}if(void 0===r)return null;var i=r.tagName.toLowerCase(),o=new t(r),e=t.prototype[i];return e["as"+n(e.name)].call(o),o},this}return{name:"lex",constructor:function(t){return r.call(this,t),this}}}),t.extend(function(t){function r(r,n,o){var e=document.getElementById(r);if(null===e)return console.error("Invalid parent container id"),null;void 0===n&&(n=e.clientWidth),void 0===o&&(o=e.clientHeight);var s=new t("svg",e);return s.attr({x:0,y:0,width:n,height:o}),canvas=i.call(s),canvas.dom.setAttribute("xmlns",t.prototype.svg_ns),canvas.dom.setAttributeNS(t.prototype.xml_ns,"xmlns:xlink",t.prototype.xlink_ns),canvas.attr({version:"1.1",baseProfile:"full"}),canvas}function n(r,n,o,e){var s=new t("svg",this.dom);return s.attr({x:r,y:n,width:o,height:e}),i.call(s),s}function i(){return this.pos=function(t,r){if(void 0===t){var n=this.attr.y;if(null!==n)return{x:n[0],y:n[1]}}else this.attr({x:t,y:r})},this.viewBox=function(t,r,n,i){if(void 0===t){var o=this.attr("viewBox");return null===o?null:(o=o.split(" "),{x:parseFloat(o[0]),y:parseFloat(o[1]),w:parseFloat(o[2]),h:parseFloat(o[3])})}this.attr("viewBox",[t,r,n,i].join(" "))},this.preserveAspectRatio=function(t,r,n){return r=void 0===r?"":r,n(n===udnefined)?"":n,this.attr("preserveAspectRatio",r+" "+t+" "+n),this},this.zoom=function(){return console.warn("zoom not implemented"),this},this}t.prototype.svg=n,t.prototype.svgRoot=r,n.asSvg=i}),t.extend(function(t){function r(){var r=new t("g",this.dom);return n.call(r)}function n(){return this}t.prototype.g=r,r.asG=n}),t.extend(function(t,r){function n(r,n,o,e){var s=new t("rect",this.dom);return s.attr({x:r,y:n,width:o,height:e}),i.call(s)}function i(){return this.round=function(t,n){return void 0===t?{rx:r.toNum(this.attr("rx")),ry:r.toNum(this.attr("ry"))}:(this.attr({rx:t,ry:n}),this)},this}t.prototype.rect=n,n.asRect=i}),t.extend(function(t,r){function n(r,n,o){var e=new t("circle",this.dom);return e.attr({cx:r,cy:n,r:o}),i.call(e),e}function i(){return this.radius=function(t){return void 0===t?r.toNum(this.attr("r",t)):void this.attr("r",t)},this.center=function(t,n){return void 0===t?{cx:r.toNum(this.attr("cx")),cy:r.toNum(this.attr("cy"))}:(this.attr({cx:t,cy:n}),this)},this}t.prototype.circle=n,n.asCircle=i}),t.extend(function(t,r){function n(r,n,o,e){var s=new t("ellipse",this.dom);return s.attr({cx:r,cy:n,rx:o,ry:e}),i.call(s)}function i(){return this.attr.DirectAccess(this,["+rx","+ry"]),this.center=function(t,n){return void 0===t?{cx:r.toNum(this.attr("cx")),cy:r.toNum(this.attr("cy"))}:(this.attr({cx:t,cy:n}),this)},this}t.prototype.ellipse=n,n.asEllipse=i}),t.extend(function(t,r){function n(r,n,o,e){var s=new t("line",this.dom);return s.attr({x1:r,y1:n,x2:o,y2:e}),i.call(s)}function i(){return this.origin=function(t,n){return void 0===t?{x:r.toNum(this.attr("x1")),y:r.toNum(this.attr("y1"))}:(this.attr({x1:t,y1:n}),this)},this.dest=function(t,n){return void 0===t?{x:r.toNum(this.attr("x2")),y:r.toNum(this.attr("y2"))}:(this.attr({x2:t,y2:n}),this)},this.move=function(t,n){var i=this.attr(["x1","y1","x2","y2"]);return i.x1=r.toNum(i.x1)+t,i.y1=r.toNum(i.y1)+n,i.x2=r.toNum(i.x2)+t,i.y2=r.toNum(i.y2)+n,this.attr(i),this},this}t.prototype.line=n,n.asLine=i}),t.extend(function(t,r){function n(r){var n=u(r);if(null===n)return null;var i=new t("polyline",this.dom);return i._points_array=n.points,i.attr("points",n.points_string),e.call(i)}function i(r){var n=u(r);if(null===n)return null;var i=new t("polygon",this.dom);return i._points_array=n.points,i.attr("points",n.points_string),o.call(i)}function o(){return s.call(this)}function e(){return s.call(this)}function s(){function t(t){return t<-this._points_array.length/2?!1:t>=this._points_array.length/2?!1:!0}return Object.defineProperty(this,"numPoints",{get:function(){return this._points_array.length/2}}),this.points=function(t){if(void 0===t)return this._points_array;var r=u(t);return this._points_array=r.points,this.attr("points",r.points_string),this},this.add=function(t,r,n){if(t<-this._points_array.length/2)return this;if(t>this._points_array.length/2)return this;0>t&&(t=this._points_array.length/2+t);var i=this._points_array;return Array.prototype.splice.call(i,2*t,0,r,n),this.attr("points",i.join(" ")),this},this.remove=function(r){if(t.call(this,r)===!1)return this;0>r&&(r=this._points_array.length/2+r);var n=this._points_array;return Array.prototype.splice.call(n,2*r,2),this.attr("points",n.join(" ")),this},this.point=function(r,n,i){if(t.call(this,r)===!1)return null;if(0>r&&(r=this._points_array.length/2+r),void 0===n)return{x:this._points_array[2*r],y:this._points_array[2*r+1]};var o=this._points_array;return o[2*r]=n,o[2*r+1]=i,this.attr("points",o.join(" ")),this},this.move=function(r,n,i,o){if(void 0!==i&&t.call(this,i)===!1)return this;if(void 0!==o&&t.call(this,o)===!1)return this;void 0===i&&(i=0),void 0===o&&(o=this._points_array.length/2);for(var e=this._points_array,s=2*o,u=2*i;s>u;u+=2)e[u]+=r,e[u+1]+=n;return this.attr("points",e.join(" ")),this},this}function u(t){var n=t,i="";return r.is(t,"array")?(n=t,i=n.join(" ")):r.is(t,"string")&&(i=n,n=i.split(r.regex.points).map(function(t){return r.toNum(t)})),n.length%2!==0?(console.error("Require an even number of numbers"),null):{points:n,points_string:i}}t.prototype.polyline=n,t.prototype.polygon=i,n.asPolyline=e,i.asPolygon=o}),t});