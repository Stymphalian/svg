!function(t,r){"function"==typeof define&&define.amd?define(r):"object"==typeof exports?exports.svg=r():t.svg=r()}(this,function(){var t=function(){function t(n,i){n&&"[object String]"===Object.prototype.toString.call(n)?this.dom=r.document.createElementNS(t.prototype.svg_ns,n):void 0!==n&&null!==n&&(this.dom=n),i&&i.appendChild(this.dom)}var r={window:window,document:window.document};return t.prototype.version="0.0.0",t.prototype.svg_ns="http://www.w3.org/2000/svg",t.prototype.xlink_ns="http://www.w3.org/1999/xlink",t.prototype.xml_ns="http://www.w3.org/2000/xmlns/",t.prototype.clear=function(){for(;this.dom.firstChild;)this.dom.removeChild(this.dom.firstChild);return this},t.prototype.remove=function(){this.clear(),this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom)},t.prototype.reRunMixin=function(){function r(t){return t.charAt(0).toUpperCase()+t.slice(1)}var n=this.dom.tagName;"switch"===n&&(n="switchElem");var i=t.prototype[n];return i["as"+r(i.name)].call(this),this},t.prototype.clone=function(){var r=t.prototype.util.clone(this);for(var n in r)void 0!==t.prototype.plugin.has[n]&&Object.prototype.hasOwnProperty.call(r,n)&&delete r[n];return r.reRunMixin(),this.dom.parentNode&&this.dom.parentNode.appendChild(r.dom),r},t.prototype.extend=function(r){r(t,t.prototype.util)},t.prototype.plugin=function(r,n){var i=Object.prototype.hasOwnProperty,e=r(t,t.prototype.util);i.call(e,"name")!==!1&&i.call(e,"constructor")!==!1&&(void 0===n&&(n=!1),(t.prototype.plugin.has[e.name]!==!0||n!==!1)&&(t.prototype.plugin.has[e.name]=!0,Object.defineProperty(t.prototype,e.name,{get:function(){var t=new e.constructor(this);return Object.defineProperty(this,e.name,{value:t,writable:!0,configurable:!0,enumerable:!0}),t},set:function(){},configurable:!0,enumerable:!0})))},t.prototype.plugin.has={},new t}();return function(t){function r(){}t.__proto__.util=r,r.regex={split_seperator:/[, ]/,pathCommand:/([a-z])[,\s]*((-?\d+\.?\d*(?:e[+-]?\d+)?\s*,?\s*)*)/gi,pathValues:/(-?\d+\.?\d*(?:e[+-]?\d+)?)\s*,?\s*/gi,number:/(-?\d+\.?\d*(?:e[+-]?\d+)?)/},r.is=function(t,r){if(void 0===t||null===t)return!1;var n=Object.prototype.toString.call(t).toLowerCase(),i="[object ",e=n.substring(i.length,i.length+r.length);return e===r},r.isUpperCase=function(t){return t.toUpperCase()===t},r.toNum=function(t){if(null===t)return null;var r=+t;return isNaN(+t)?t:r},r.mixin=function(t,r,n){n=void 0===n?!1:n;for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n||!Object.prototype.hasOwnProperty.call(t,i))&&(t[i]=r[i]);return t},r.mixinUsingFunc=function(t,r,n){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=n(t,r,i));return t},r.mixinFromExports=function(t,r,n,i){if(!n||"[object Array]"!=Object.prototype.toString.call(n)){i=void 0===i?!1:i;var e,o,s=n.length;for(e=0;s>e;++e)o=n[e],Object.prototype.hasOwnProperty.call(r,o)&&(i||!Object.prototype.hasOwnProperty.call(t,o))&&(t[o]=r[o]);return t}},r.clone=function(t){function n(t,r,n){var i,e,o={};for(i in r)e=r[i],(!1==i in t||t[i]!==e&&(i in o==0||o[i]!==e))&&(t[i]=n?n(e):e);return t}if(!t||"object"!=typeof t||r.is(t,"function"))return t;if(t.nodeType&&"cloneNode"in t)return t.cloneNode(!0);if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);var i;if(r.is(t,"array")){i=[];for(var e=t.length,o=0;e>o;++o)i.push(r.clone(t[o]))}else i=t.constructor?new t.constructor:{};return n(i,t,r.clone)}}(t),t.extend(function(t,r){function n(){}function i(t){return 0>t?0:t>255?255:t}t.prototype.color=new n,n.prototype.rgb2hex=function(t,r,n){var e=["#",0,0,0];return e[1]=Number.prototype.toString.call(i(t),16),e[2]=Number.prototype.toString.call(i(r),16),e[3]=Number.prototype.toString.call(i(n),16),Array.prototype.join.call(e,"")},n.prototype.hex2rgb=function(t){return t="#"===t.charAt(0)?t.substring(1,7):t,{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16)}},n.prototype.asHex=function(t,i,e){if(void 0===t)return null;if(r.is(t,"string"))return"#"!==a.charAt(0)&&(t="#"+t),t;if(void 0!==i&&void 0!==e)return n.prototype.rgb2hex(t,i,e)}}),t.extend(function(t,r){function n(t,r,n){if(void 0===t)return this;var i=r;if(this.attrMunger){var e=this.attrMunger(t,r);e.munged&&(i=e.value)}return void 0===i?this:(void 0===n||null===n?this.dom.setAttribute(t,i):this.dom.setAttributeNS(n,t,i),this)}function i(t,i,e){if(void 0===t)return function(){for(var t,r,n=[],i=this.dom.attributes.length,e=0;i>e;++e)t=this.dom.attributes[e].name,r=this.dom.attributes[e].value,n.push([t,r]);return n}.call(this);if(r.is(t,"object")){e=void 0!==i?i:null;for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&n.call(this,o,t[o],e);return this}if(r.is(t,"string")){if(void 0===i){var s=this.dom.attributes[t];return null!==s&&void 0!==s?s.value:null}return void 0===e&&(e=null),n.call(this,t,i,e),this}if(r.is(t,"array")){for(var s={},a=t.length,u=0;a>u;++u){var c=this.dom.attributes[t[u]];void 0!==c&&null!==c&&null!==c.value&&(s[t[u]]=c.value)}return s}}t.prototype.attr=i,i._defineProperty=function(t,r,n,i){return Object.defineProperty(t,r,{get:n,set:i,configurable:!0,enumerable:!0}),t},i.DirectAccessNoFunction=function(t,n,e){void 0===e&&(e=t);for(var o=n.length,s=0;o>s;++s)!function(n){var o=!1;"+"===n.charAt(0)&&(o=!0,n=n.substring(1)),i._defineProperty(t,n,function(){return o?r.toNum(e.attr(n)):e.attr(n)},function(t){return e.attr(n,t),e})}(n[s])},i.DirectAccess=function(t,n,i){void 0===i&&(i=t);for(var e=n.length,o=0;e>o;++o){var s=!1,a=n[o];"+"===a.charAt(0)&&(s=!0,a=a.substring(1)),t[a]=function(t,n){return function(e){return void 0===e?n?r.toNum(i.attr(t)):i.attr(t):(i.attr(t,e),i)}}(a,s)}}}),t.plugin(function(t,r){function n(t){function n(t){return null!==t.attr("cx")}function i(t){return null!==t.attr("rx")}if(void 0===t||null===t)return this;var e=["+x","+y","+width","+height","+rx","+ry","+r","+cx","+cy"];return t.attr.DirectAccessNoFunction(this,e,t),this.pos=function(i,e){return n(t)?void 0===i?{cx:r.toNum(t.attr("cx")),cy:r.toNum(t.attr("cy"))}:(t.attr({cx:i,cy:e}),t):void 0===i?{x:r.toNum(t.attr("x")),y:r.toNum(t.attr("y"))}:(t.attr({x:i,y:e}),t)},this.size=function(e,o){return i(t)?void 0===e?{rx:r.toNum(t.attr("rx")),ry:r.toNum(t.attr("ry"))}:(t.attr({rx:e,ry:o}),t):n(t)?void 0===e?{r:r.toNum(t.attr("r"))}:(t.attr({r:e}),t):void 0===e?{width:r.toNum(t.attr("width")),height:r.toNum(t.attr("height"))}:(t.attr({width:e,height:o}),t)},this.move=function(i,e){if(void 0===i)return null;if(null!==t.attr("points"));else if(null!==t.attr("x1")){var o=t.attr(["x1","y1","x2","y2"]);return o.x1=r.toNum(o.x1)+i,o.y1=r.toNum(o.y1)+e,o.x2=r.toNum(o.x2)+i,o.y2=r.toNum(o.y2)+e,t.attr(o),t}var o=this.pos();return t.attr(n(t)?{cx:i+o.cx,cy:e+o.cy}:{x:i+o.x,y:e+o.y}),t},this}return{name:"shape",constructor:function(t){return n.call(this,t),this}}}),t.plugin(function(){function t(t){return void 0===t||null===t?this:(this.translate=function(){return t},this)}return{name:"transform",constructor:function(r){return t.call(this,r),this}}}),t.plugin(function(t,r){function n(t){var r=function(r){return t.attr("style",r)};return i.call(r,t),r}function i(t){function n(t){return 0>t&&(t=0),t>1&&(t=1),t}function i(t,i){if(void 0===i){var i=this.attr(t);return null!=i?r.toNum(i):null}return i=n(r.toNum(i)),this.attr(t,i),this}function e(t,n){var i;return void 0===n?(i=this.attr(t),null===i?null:i=i.split(" ").map(function(t){return r.toNum(t)})):(i=r.is(n,"array")?n.join(" "):n,this.attr(t,i),this)}function o(r){return t.attr("stroke",r)}function s(r){return t.attr("fill",r)}return void 0===t||null===t?this:(this.stroke=o,o.width=function(n){return r.toNum(t.attr("stroke-width",n))},o.opacity=function(r){return i.call(t,"stroke-opacity",r)},o.dasharray=function(r){return e.call(t,"stroke-dasharray",r)},this.fill=s,void(s.opacity=function(r){return i.call(t,"fill-opacity",r)}))}return{name:"style",constructor:n}}),t.plugin(function(t){function r(r){return void 0===r||null===r?this:(this.parse=function(r){function n(t){return t.charAt(0).toUpperCase()+t.slice(1)}if(void 0===r)return null;var i=r.tagName.toLowerCase();"switch"===i&&(i="switchElem");var e=new t(r),o=t.prototype[i];return o["as"+n(o.name)].call(e),e},this)}return{name:"lex",constructor:function(t){return r.call(this,t),this}}}),t.extend(function(t){function r(r,n,e){var o=document.getElementById(r);if(null===o)return console.error("Invalid parent container id"),null;void 0===n&&(n=o.clientWidth),void 0===e&&(e=o.clientHeight);var s=new t("svg",o);return s.attr({x:0,y:0,width:n,height:e}),canvas=i.call(s),canvas.dom.setAttribute("xmlns",t.prototype.svg_ns),canvas.dom.setAttributeNS(t.prototype.xml_ns,"xmlns:xlink",t.prototype.xlink_ns),canvas.attr({version:"1.1",baseProfile:"full"}),canvas}function n(r,n,e,o){var s=new t("svg",this.dom);return s.attr({x:r,y:n,width:e,height:o}),i.call(s),s}function i(){return this.pos=function(t,r){if(void 0===t){var n=this.attr.y;if(null!==n)return{x:n[0],y:n[1]}}else this.attr({x:t,y:r})},this.viewBox=function(t,r,n,i){if(void 0===t){var e=this.attr("viewBox");return null===e?null:(e=e.split(" "),{x:parseFloat(e[0]),y:parseFloat(e[1]),w:parseFloat(e[2]),h:parseFloat(e[3])})}this.attr("viewBox",[t,r,n,i].join(" "))},this.preserveAspectRatio=function(t,r,n){return r=void 0===r?"":r,n(n===udnefined)?"":n,this.attr("preserveAspectRatio",r+" "+t+" "+n),this},this.zoom=function(){return console.warn("zoom not implemented"),this},this}t.prototype.svg=n,t.prototype.svgRoot=r,n.asSvg=i}),t.extend(function(t){function r(){var r=new t("g",this.dom);return n.call(r)}function n(){return this}t.prototype.g=r,r.asG=n}),t.extend(function(t){function r(r){var i=new t("defs",this.dom);return i._defs_id=void 0===r?"defs_"+Date.now().toString()+"_":r,i._defs_start_id=0,i._defs_cache={},n.call(i)}function n(){return this.store=function(t,r,n){(n||void 0===this._defs_cache[t])&&(this._defs_cache[t]=r)},this.get=function(t){return this._defs_cache[t]},this.drop=function(t){delete this._defs_cache[t]},this.dropAll=function(){this._defs_cache={}},this.url=function(){return this._defs_start_id+=1,this._defs_id+this._defs_start_id.toString()},this}t.prototype.defs=r,r.asDefs=n}),t.extend(function(t,r){function n(r){var n=new t("symbol",this.dom);return void 0!==r&&n.attr("id",r),i.call(n)}function i(){return this.id=function(t){return this.attr("id",t)},this.viewBox=function(t,n,i,e){if(void 0===t){var o=this.attr("viewBox");return null===o?null:(o=o.split(" "),{x:r.toNum(o[0]),y:r.toNum(o[1]),w:r.toNum(o[2]),h:r.toNum(o[3])})}this.attr("viewBox",[t,n,i,e].join(" "))},this.preserveAspectRatio=function(t,r,n){return r=void 0===r?"":r,n(n===udnefined)?"":n,this.attr("preserveAspectRatio",r+" "+t+" "+n),this},this}t.prototype.symbol=n,n.asSymbol=i}),t.extend(function(t){function r(){new t("switch",this.dom);return n.call(this)}function n(){return this}t.prototype.switchElem=r,r.asSwitchElem=n}),t.extend(function(t,r){function n(r,n,e,o){var s=new t("rect",this.dom);return s.attr({x:r,y:n,width:e,height:o}),i.call(s)}function i(){return this.round=function(t,n){return void 0===t?{rx:r.toNum(this.attr("rx")),ry:r.toNum(this.attr("ry"))}:(this.attr({rx:t,ry:n}),this)},this}t.prototype.rect=n,n.asRect=i}),t.extend(function(t,r){function n(r,n,e){var o=new t("circle",this.dom);return o.attr({cx:r,cy:n,r:e}),i.call(o),o}function i(){return this.radius=function(t){return void 0===t?r.toNum(this.attr("r",t)):void this.attr("r",t)},this.center=function(t,n){return void 0===t?{cx:r.toNum(this.attr("cx")),cy:r.toNum(this.attr("cy"))}:(this.attr({cx:t,cy:n}),this)},this}t.prototype.circle=n,n.asCircle=i}),t.extend(function(t,r){function n(r,n,e,o){var s=new t("ellipse",this.dom);return s.attr({cx:r,cy:n,rx:e,ry:o}),i.call(s)}function i(){return this.attr.DirectAccess(this,["+rx","+ry"]),this.center=function(t,n){return void 0===t?{cx:r.toNum(this.attr("cx")),cy:r.toNum(this.attr("cy"))}:(this.attr({cx:t,cy:n}),this)},this}t.prototype.ellipse=n,n.asEllipse=i}),t.extend(function(t,r){function n(r,n,e,o){var s=new t("line",this.dom);return s.attr({x1:r,y1:n,x2:e,y2:o}),i.call(s)}function i(){return this.origin=function(t,n){return void 0===t?{x:r.toNum(this.attr("x1")),y:r.toNum(this.attr("y1"))}:(this.attr({x1:t,y1:n}),this)},this.dest=function(t,n){return void 0===t?{x:r.toNum(this.attr("x2")),y:r.toNum(this.attr("y2"))}:(this.attr({x2:t,y2:n}),this)},this.move=function(t,n){var i=this.attr(["x1","y1","x2","y2"]);return i.x1=r.toNum(i.x1)+t,i.y1=r.toNum(i.y1)+n,i.x2=r.toNum(i.x2)+t,i.y2=r.toNum(i.y2)+n,this.attr(i),this},this}t.prototype.line=n,n.asLine=i}),t.extend(function(t,r){function n(r){var n=a(r);if(null===n)return null;var i=new t("polyline",this.dom);return i._points_array=n.points,i.attr("points",n.points_string),o.call(i)}function i(r){var n=a(r);if(null===n)return null;var i=new t("polygon",this.dom);return i._points_array=n.points,i.attr("points",n.points_string),e.call(i)}function e(){return s.call(this)}function o(){return s.call(this)}function s(){function t(t){return t<-this._points_array.length/2?!1:t>=this._points_array.length/2?!1:!0}return Object.defineProperty(this,"numPoints",{get:function(){return this._points_array.length/2}}),this.points=function(t){if(void 0===t)return this._points_array;var r=a(t);return this._points_array=r.points,this.attr("points",r.points_string),this},this.add=function(t,r,n){if(t<-this._points_array.length/2)return this;if(t>this._points_array.length/2)return this;0>t&&(t=this._points_array.length/2+t);var i=this._points_array;return Array.prototype.splice.call(i,2*t,0,r,n),this.attr("points",i.join(" ")),this},this.remove=function(r){if(t.call(this,r)===!1)return this;0>r&&(r=this._points_array.length/2+r);var n=this._points_array;return Array.prototype.splice.call(n,2*r,2),this.attr("points",n.join(" ")),this},this.point=function(r,n,i){if(t.call(this,r)===!1)return null;if(0>r&&(r=this._points_array.length/2+r),void 0===n)return{x:this._points_array[2*r],y:this._points_array[2*r+1]};var e=this._points_array;return e[2*r]=n,e[2*r+1]=i,this.attr("points",e.join(" ")),this},this.move=function(r,n,i,e){if(void 0!==i&&t.call(this,i)===!1)return this;if(void 0!==e&&t.call(this,e)===!1)return this;void 0===i&&(i=0),void 0===e&&(e=this._points_array.length/2);for(var o=this._points_array,s=2*e,a=2*i;s>a;a+=2)o[a]+=r,o[a+1]+=n;return this.attr("points",o.join(" ")),this},this}function a(t){var n=t,i="";return r.is(t,"array")?(n=t,i=n.join(" ")):r.is(t,"string")&&(i=n,n=i.split(r.regex.split_seperator).map(function(t){return r.toNum(t)})),n.length%2!==0?(console.error("Require an even number of numbers"),null):{points:n,points_string:i}}t.prototype.polyline=n,t.prototype.polygon=i,n.asPolyline=o,i.asPolygon=e}),t.extend(function(t,r){function n(r){var n=new t("path",this.dom);return n._path_cmds=i(r),n.attr("d",e(n._path_cmds)),o.call(n)}function i(t){if(void 0===t||null===t)return null;var n={m:2,l:2,v:1,h:1,z:0,c:6,s:4,q:4,t:2,a:7},i=[];return t.replace(r.regex.pathCommand,function(t,e,o){if(void 0!==e&&null!==e&&void 0!==o&&null!==o&&void 0!==n[e.toLowerCase()]){var s={name:e,values:[]};o.replace(r.regex.pathValues,function(t,r){r&&s.values.push(+r)}),s.values.length<n[e.toLowerCase()]||i.push(s)}}),i}function e(t){for(var r="",n=t.length,i=0;n>i;++i){var e=t[i].name;t[i].values.length>0&&(e+=" "+t[i].values.join(" ")),r=r+e+" "}return r}function o(){return this.d=function(t){return void 0===t?this.attr("d"):(this._path_cmds=i(d),this.attr("d",e(this._path_cmds)))},this.move=function(t,n){for(var i,o,s=this._path_cmds,a=s.length,i=0;a>i;++i)if(r.isUpperCase(s[i].name)){var u=s[i].name,c=s[i].values,h=c.length;if("A"===u)c[5]+=t,c[6]+=n;else if("V"===u)c[0]+=n;else if("H"===u)c[0]+=t;else for(o=0;h>o;o+=2)c[o]+=t,c[o+1]+=n}return this.attr("d",e(this._path_cmds)),this},this.insert=function(t,r){if(t<-this._path_cmds.length)return this;if(t>this._path_cmds.length)return this;0>t&&(t=this._path_cmds.length+t);var n=i(r),o=this._path_cmds.slice(0,t),s=this._path_cmds.slice(t);return this._path_cmds=o.concat(n).concat(s),this.attr("d",e(this._path_cmds)),this},this.remove=function(t){return t<-this._path_cmds.length?this:t>=this._path_cmds.length?this:(0>t&&(t=this._path_cmds.length+t),Array.prototype.splice.call(this._path_cmds,t,1),this.attr("d",e(this._path_cmds)),this)},this.point=function(t){return t<-this._path_cmds.length?this:t>=this._path_cmds.length?this:(0>t&&(t=this._path_cmds.length+t),s(this._path_cmds[t]),this._path_cmds[t])},this.save=function(){return this.attr("d",e(this._path_cmds))},this}function s(t){function r(r){return 0>r?t.values.length+r:r}function n(n){return function(i){return void 0===i?t.values[r(n)]:(t.values[r(n)]=i,t)}}function i(n){return function(i,e){return void 0===i?{x:t.values[r(n[0])],y:t.values[r(n[1])]}:(t.values[r(n[0])]=i,t.values[r(n[1])]=e,t)}}function e(r){return function(n){return void 0===n?!!t.values[r]:(t.values[r]=n?1:0,t)}}var o={x:0,y:1,c1:[0,1],c2:[2,3],end:[-2,-1]},s=t.name.toLowerCase();"v"===s?o.y=0:"h"===s?o.x=0:"a"===s&&(o.x=-2,o.y=-1),t.c1=i(o.c1),t.c2=i(o.c2),t.end=i(o.end),t.x=n(o.x),t.y=n(o.y),"a"===s&&(t.rx=n(0),t.ry=n(1),t.rotation=n(2),t.largeArc=e(3),t.clockwise=e(4))}t.prototype.path=n,n.asPath=o}),t.extend(function(t){function r(r,i,e,o,s){var a=new t("use",this.dom);return void 0!==r&&("#"!==r.charAt(0)&&(r="#"+r),a.attr("xlink:href",r,t.prototype.xlink_ns),void 0!==i&&a.attr("x",i),void 0!==e&&a.attr("y",e),void 0!==o&&a.attr("width",o),void 0!==s&&a.attr("height",s)),n.call(a)}function n(){return this.attr.DirectAccess(this,["+x","+y","+width","+height"]),this.href=function(r){return void 0===r?this.attr("xlink:href"):("#"!==r.charAt(0)&&(r="#"+r),this.attr("xlink:href",r,t.prototype.xlink_ns),this)},this}t.prototype.use=r,r.asUse=n}),t.extend(function(t){function r(r,i,e,o,s){var a=new t("image",this.dom);return void 0!==r&&a.attr("xlink:href",r,t.prototype.xlink_ns),void 0!==i&&a.attr("x",i),void 0!==e&&a.attr("x",e),void 0!==o&&a.attr("width",o),void 0!==s&&a.attr("height",s),n.call(a)}function n(){return this.attr.DirectAccess(this,["+x","+y","+width","+height"]),this.href=function(r){return void 0===r?this.attr("xlink:href"):void this.attr("xlink:href",r,t.prototype.xlink_ns)},this.preserveAspectRatio=function(t,r,n){return r=void 0===r?"":r,n(n===udnefined)?"":n,this.attr("preserveAspectRatio",r+" "+t+" "+n),this},this}t.prototype.image=r,r.asImage=n}),t});