!function(t,r){"function"==typeof define&&define.amd?define(r):"object"==typeof exports?exports.svg=r():t.svg=r()}(this,function(){var t=function(){function t(){}return t.util={},t.svgElem={},t.version="0.0.0",t.modules={},t.module=function(r){r(t)},t.extend=function(r){r(t.svgElem,t.util,t.modules)},t.plugin=function(r,n){var i=t.svgElem,e=Object.prototype.hasOwnProperty,o=r(t.svgElem,t.util,t.modules);e.call(o,"name")!==!1&&e.call(o,"constructor")!==!1&&(void 0===n&&(n=!1),(t.plugin.has[o.name]!==!0||n!==!1)&&(t.plugin.has[o.name]=!0,Object.defineProperty(i.prototype,o.name,{get:function(){var t=new o.constructor(this);return Object.defineProperty(this,o.name,{value:t,writable:!0,configurable:!0,enumerable:!0}),t},set:function(){},configurable:!0,enumerable:!0})))},t.plugin.has={},t}();return t.module(function(t){function r(){}t.util=r,r.regex={split_seperator:/[, ]/,pathCommand:/([a-z])[,\s]*((-?\d+\.?\d*(?:e[+-]?\d+)?\s*,?\s*)*)/gi,pathValues:/(-?\d+\.?\d*(?:e[+-]?\d+)?)\s*,?\s*/gi,number:/(-?\d+\.?\d*(?:e[+-]?\d+)?)/},r.is=function(t,r){if(void 0===t||null===t)return!1;var n=Object.prototype.toString.call(t).toLowerCase(),i="[object ",e=n.substring(i.length,i.length+r.length);return e===r},r.isUpperCase=function(t){return t.toUpperCase()===t},r.toNum=function(t){if(null===t)return null;var r=+t;return isNaN(+t)?t:r},r.mixin=function(t,r,n){n=void 0===n?!1:n;for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n||!Object.prototype.hasOwnProperty.call(t,i))&&(t[i]=r[i]);return t},r.mixinUsingFunc=function(t,r,n){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=n(t,r,i));return t},r.mixinFromExports=function(t,r,n,i){if(!n||"[object Array]"!=Object.prototype.toString.call(n)){i=void 0===i?!1:i;var e,o,s=n.length;for(e=0;s>e;++e)o=n[e],Object.prototype.hasOwnProperty.call(r,o)&&(i||!Object.prototype.hasOwnProperty.call(t,o))&&(t[o]=r[o]);return t}},r.arrayOrString=function(t){var n=t,i="";return r.is(t,"array")?(n=t,i=n.join(" ")):r.is(t,"string")&&(i=n,n=i.split(r.regex.split_seperator).map(function(t){return r.toNum(t)})),{points:n,points_string:i}},r.clone=function(t){function n(t,r,n){var i,e,o={};for(i in r)e=r[i],(!1==i in t||t[i]!==e&&(i in o==0||o[i]!==e))&&(t[i]=n?n(e):e);return t}if(!t||"object"!=typeof t||r.is(t,"function"))return t;if(t.nodeType&&"cloneNode"in t)return t.cloneNode(!0);if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);var i;if(r.is(t,"array")){i=[];for(var e=t.length,o=0;e>o;++o)i.push(r.clone(t[o]))}else i=t.constructor?new t.constructor:{};return n(i,t,r.clone)}}),t.module(function(t){function r(t,i){t&&"[object String]"===Object.prototype.toString.call(t)?this.dom=n.document.createElementNS(r.prototype.svg_ns,t):void 0!==t&&null!==t&&(this.dom=t),i&&i.appendChild(this.dom)}t.svgElem=r;var n={window:window,document:window.document};r.prototype.svg_ns="http://www.w3.org/2000/svg",r.prototype.xlink_ns="http://www.w3.org/1999/xlink",r.prototype.xml_ns="http://www.w3.org/2000/xmlns/",r.prototype.clear=function(){for(;this.dom.firstChild;)this.dom.removeChild(this.dom.firstChild);return this},r.prototype.remove=function(){this.clear(),this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom)},r.prototype.reRunMixin=function(){function t(t){return t.charAt(0).toUpperCase()+t.slice(1)}var n=this.dom.tagName;"switch"===n&&(n="switchElem");var i=r.prototype[n],e=i["as"+t(i.name)];e&&"[object Function]"===Object.prototype.toString.call(this)&&(e=[e]);for(var o=0;o<e.length;++o)e[o].call(this);return this},r.prototype.clone=function(){var r=t.util.clone(this);for(var n in r)void 0!==t.plugin.has[n]&&Object.prototype.hasOwnProperty.call(r,n)&&delete r[n];return r.reRunMixin(),this.dom.parentNode&&this.dom.parentNode.appendChild(r.dom),r},r.prototype.createTextNode=function(t){return n.document.createTextNode(t)}}),t.module(function(t){function r(){}t.modules.common=r;t.util,t.svgElem;r.asViewport=function(){return this.viewBox=function(t,r,n,i){if(void 0===t){var e=this.attr("viewBox");return null===e?null:(e=e.split(" "),{x:parseFloat(e[0]),y:parseFloat(e[1]),w:parseFloat(e[2]),h:parseFloat(e[3])})}this.attr("viewBox",[t,r,n,i].join(" "))},this.preserveAspectRatio=function(t,r,n){return r=void 0===r?"":r,n(n===udnefined)?"":n,this.attr("preserveAspectRatio",r+" "+t+" "+n),this},this.zoom=function(){return console.warn("zoom not implemented"),this},this}}),t.extend(function(t,r){function n(){}function i(t){return 0>t?0:t>255?255:t}t.prototype.color=new n,n.prototype.rgb2hex=function(t,r,n){var e=["#",0,0,0];return e[1]=Number.prototype.toString.call(i(t),16),e[2]=Number.prototype.toString.call(i(r),16),e[3]=Number.prototype.toString.call(i(n),16),Array.prototype.join.call(e,"")},n.prototype.hex2rgb=function(t){return t="#"===t.charAt(0)?t.substring(1,7):t,{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16)}},n.prototype.asHex=function(t,i,e){if(void 0===t)return null;if(r.is(t,"string"))return"#"!==a.charAt(0)&&(t="#"+t),t;if(void 0!==i&&void 0!==e)return n.prototype.rgb2hex(t,i,e)}}),t.extend(function(t,r){function n(t,r,n){if(void 0===t)return this;var i=r;if(this.attrMunger){var e=this.attrMunger(t,r);e.munged&&(i=e.value)}return void 0===i?this:(void 0===n||null===n?this.dom.setAttribute(t,i):this.dom.setAttributeNS(n,t,i),this)}function i(t,i,e){if(void 0===t)return function(){for(var t,r,n=[],i=this.dom.attributes.length,e=0;i>e;++e)t=this.dom.attributes[e].name,r=this.dom.attributes[e].value,n.push([t,r]);return n}.call(this);if(r.is(t,"object")){e=void 0!==i?i:null;for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&n.call(this,o,t[o],e);return this}if(r.is(t,"string")){if(void 0===i){var s=this.dom.attributes[t];return null!==s&&void 0!==s?s.value:null}return void 0===e&&(e=null),n.call(this,t,i,e),this}if(r.is(t,"array")){for(var s={},a=t.length,u=0;a>u;++u){var c=this.dom.attributes[t[u]];void 0!==c&&null!==c&&null!==c.value&&(s[t[u]]=c.value)}return s}}t.prototype.attr=i,i._defineProperty=function(t,r,n,i){return Object.defineProperty(t,r,{get:n,set:i,configurable:!0,enumerable:!0}),t},i.DirectAccessNoFunction=function(t,n,e){void 0===e&&(e=t);for(var o=n.length,s=0;o>s;++s)!function(n){var o=!1;"+"===n.charAt(0)&&(o=!0,n=n.substring(1)),i._defineProperty(t,n,function(){return o?r.toNum(e.attr(n)):e.attr(n)},function(t){return e.attr(n,t),e})}(n[s])},i.DirectAccessNoFunctionDiffName=function(t,n,e){void 0===e&&(e=t);for(var o=n.length,s=0;o>s;++s)!function(n,o,s){void 0===s&&(s=!1),i._defineProperty(t,n,function(){return s?r.toNum(e.attr(o)):e.attr(o)},function(t){return e.attr(o,t),e})}(n[s].desired,n[s].real,n[s].isNum)},i.DirectAccess=function(t,n,i){void 0===i&&(i=t);for(var e=n.length,o=0;e>o;++o){var s=!1,a=n[o];"+"===a.charAt(0)&&(s=!0,a=a.substring(1)),t[a]=function(t,n){return function(e){return void 0===e?n?r.toNum(i.attr(t)):i.attr(t):(i.attr(t,e),i)}}(a,s)}},i.DirectAccessDiffName=function(t,n,i){void 0===i&&(i=t);for(var e=n.length,o=0;e>o;++o)t[n[o].desired]=function(t,n,e){return void 0===e&&(e=!1),void 0===n&&(n=t),function(t){return void 0===t?e?r.toNum(contex.attr(n)):contex.attr(n):(i.attr(n,t),i)}}(n[o].desired,n[o].real,n[o].isNum)}}),t.plugin(function(t,r){function n(t){function n(t){return null!==t.attr("cx")}function i(t){return null!==t.attr("rx")}if(void 0===t||null===t)return this;var e=["+x","+y","+width","+height","+rx","+ry","+r","+cx","+cy"];return t.attr.DirectAccessNoFunction(this,e,t),this.pos=function(i,e){return n(t)?void 0===i?{cx:r.toNum(t.attr("cx")),cy:r.toNum(t.attr("cy"))}:(t.attr({cx:i,cy:e}),t):void 0===i?{x:r.toNum(t.attr("x")),y:r.toNum(t.attr("y"))}:(t.attr({x:i,y:e}),t)},this.size=function(e,o){return i(t)?void 0===e?{rx:r.toNum(t.attr("rx")),ry:r.toNum(t.attr("ry"))}:(t.attr({rx:e,ry:o}),t):n(t)?void 0===e?{r:r.toNum(t.attr("r"))}:(t.attr({r:e}),t):void 0===e?{width:r.toNum(t.attr("width")),height:r.toNum(t.attr("height"))}:(t.attr({width:e,height:o}),t)},this.move=function(i,e){if(void 0===i)return null;if(null!==t.attr("points"));else if(null!==t.attr("x1")){var o=t.attr(["x1","y1","x2","y2"]);return o.x1=r.toNum(o.x1)+i,o.y1=r.toNum(o.y1)+e,o.x2=r.toNum(o.x2)+i,o.y2=r.toNum(o.y2)+e,t.attr(o),t}var o=this.pos();return t.attr(n(t)?{cx:i+o.cx,cy:e+o.cy}:{x:i+o.x,y:e+o.y}),t},this}return{name:"shape",constructor:function(t){return n.call(this,t),this}}}),t.plugin(function(){function t(t){return void 0===t||null===t?this:(this.translate=function(){return t},this)}return{name:"transform",constructor:function(r){return t.call(this,r),this}}}),t.plugin(function(t,r){function n(t){var r=function(r){return t.attr("style",r)};return i.call(r,t),r}function i(t){function n(t){return 0>t&&(t=0),t>1&&(t=1),t}function i(t,i){if(void 0===i){var i=this.attr(t);return null!=i?r.toNum(i):null}return i=n(r.toNum(i)),this.attr(t,i),this}function e(t,n){var i;return void 0===n?(i=this.attr(t),null===i?null:i=i.split(" ").map(function(t){return r.toNum(t)})):(i=r.is(n,"array")?n.join(" "):n,this.attr(t,i),this)}function o(r){return t.attr("stroke",r)}function s(r){return t.attr("fill",r)}function a(){}return void 0===t||null===t?this:(this.stroke=o,o.width=function(n){return r.toNum(t.attr("stroke-width",n))},o.opacity=function(r){return i.call(t,"stroke-opacity",r)},o.dasharray=function(r){return e.call(t,"stroke-dasharray",r)},o.dashoffset=function(r){return t.attr("stroke-dashoffset",r)},o.linecap=function(r){return t.attr("stroke-linecap",r)},o.linejoin=function(r){return t.attr("stroke-linejoin",r)},o.miterlimit=function(r){return 1>r&&(r=1),t.attr("miterlimit",r)},this.fill=s,s.opacity=function(r){return i.call(t,"fill-opacity",r)},s.rule=function(r){return t.attr("fill-rule",r)},this.marker=a,a.start=function(){},a.mid=function(){},void(a.end=function(){}))}return{name:"style",constructor:n}}),t.plugin(function(t){function r(r){return void 0===r||null===r?this:(this.parse=function(r){function n(t){return t.charAt(0).toUpperCase()+t.slice(1)}if(void 0===r)return null;var i=r.tagName.toLowerCase();"switch"===i&&(i="switchElem");var e=new t(r),o=t.prototype[i];return o["as"+n(o.name)].call(e),e},this)}return{name:"lex",constructor:function(t){return r.call(this,t),this}}}),t.plugin(function(){function t(t){if(void 0===t||null===t)return this;var r=[{desired:"family",real:"font-family"},{desired:"size",real:"font-size"},{desired:"size_adjust",real:"font-size-adjust"},{desired:"stretch",real:"font-stretch"},{desired:"style",real:"font-style"},{desired:"variant",real:"font-variant"},{desired:"weight",real:"font-weight"}];return t.attr.DirectAccessNoFunctionDiffName(this,r,t),this}return{name:"font",constructor:function(r){return t.call(this,r),this}}}),t.plugin(function(){function t(t){return r.call(this,t),this}function r(t){function r(t,r,n){if(void 0===n){var i=t.attr(r);return void 0===i||null==i?"":i.slice(5,-1)}return"#"!==n.charAt(0)&&(n="#"+n),t.attr(r,"url("+n+")"),t}return this.start=function(n){return r(t,"marker-start",n)},this.mid=function(n){return r(t,"marker-mid",n)},this.end=function(n){return r(t,"marker-end",n)},t}return{name:"mark",constructor:t}}),t.extend(function(t,r,n){function i(){return this.pos=function(t,r){if(void 0===t){var n=this.attr.y;if(null!==n)return{x:n[0],y:n[1]}}else this.attr({x:t,y:r})},n.common.asViewport.call(this),this}t.prototype.svg=function(r,n,e,o){var s=new t("svg",this.dom);return s.attr({x:r,y:n,width:e,height:o}),i.call(s),s},t.prototype.svg.asSvg=i}),t.module(function(t){function r(t,r,i){var e=document.getElementById(t);if(null===e)return console.error("Invalid parent container id"),null;void 0===r&&(r=e.clientWidth),void 0===i&&(i=e.clientHeight);var o=new n("svg",e);return o.attr({x:0,y:0,width:r,height:i}),n.prototype.svg.asSvg.call(o),o.dom.setAttribute("xmlns",n.prototype.svg_ns),o.dom.setAttributeNS(n.prototype.xml_ns,"xmlns:xlink",n.prototype.xlink_ns),o.attr({version:"1.1",baseProfile:"full"}),o}t.svgRoot=r;var n=t.svgElem;n.prototype.svgRoot=r,r.asSvgRoot=n.prototype.svg.asSvg}),t.extend(function(t){function r(){var r=new t("g",this.dom);return n.call(r)}function n(){return this}t.prototype.g=r,r.asG=n}),t.extend(function(t){function r(r){var i=new t("defs",this.dom);return i._defs_id=void 0===r?"defs_"+Date.now().toString()+"_":r,i._defs_start_id=0,i._defs_cache={},n.call(i)}function n(){return this.store=function(t,r,n){(n||void 0===this._defs_cache[t])&&(this._defs_cache[t]=r)},this.get=function(t){return this._defs_cache[t]},this.drop=function(t){delete this._defs_cache[t]},this.dropAll=function(){this._defs_cache={}},this.url=function(){return this._defs_start_id+=1,this._defs_id+this._defs_start_id.toString()},this}t.prototype.defs=r,r.asDefs=n}),t.extend(function(t,r,n){function i(r){var n=new t("symbol",this.dom);return void 0!==r&&n.attr("id",r),e.call(n)}function e(){return this.id=function(t){return this.attr("id",t)},n.common.asViewport.call(this),this}t.prototype.symbol=i,i.asSymbol=e}),t.extend(function(t){function r(){new t("switch",this.dom);return n.call(this)}function n(){return this}t.prototype.switchElem=r,r.asSwitchElem=n}),t.extend(function(t){function r(r){var i=new t("a",this.dom);return n.call(i),i.href(r),i}function n(){return this.href=function(r){return void 0===r?this.attr("xlink:href"):(this.attr("xlink:href",r,t.prototype.xlink_ns),this)},this.show=function(r){return void 0===r?this.attr("xlink:show"):(this.attr("xlink:href",r,t.prototype.xlink_ns),this)},this.target=function(t){return this.attr("target",t)},this}t.prototype.a=r,r.asA=n}),t.extend(function(t,r,n){function i(r,n,i){var o=new t("marker",this.dom);return o.attr({id:r,markerWidth:n,markerHeight:i}),e.call(o),o}function e(){var t=[{desired:"id"},{desired:"x",real:"refX",isNum:!0},{desired:"y",real:"refY",isNum:!0},{desired:"width",real:"markerWidth",isNum:!0},{desired:"height",real:"markerHeight",isNum:!0},{desired:"units",real:"markerUnits"},{desired:"orient",isNum:!0}];return this.attr.DirectAccessDiffName(this,t),this.useUserSpace=function(t){if(void 0===t){var r=this.attr("markerUnits");return null!==r&&void 0!==r?"userSpaceOnUse"===r:!1}return t&&this.attr("markerUnits","userSpaceOnUse"),this},this.ref=function(t,n){return void 0===t?{x:r.toNum(this.attr("refX")),y:r.toNum(this.attr("refY"))}:(this.attr({refX:t,refY:n}),this)},n.common.asViewport.call(this),this}t.prototype.marker=i,i.asMarker=e}),t.extend(function(t,r){function n(r,n,e,o){var s=new t("rect",this.dom);return s.attr({x:r,y:n,width:e,height:o}),i.call(s)}function i(){return this.round=function(t,n){return void 0===t?{rx:r.toNum(this.attr("rx")),ry:r.toNum(this.attr("ry"))}:(this.attr({rx:t,ry:n}),this)},this}t.prototype.rect=n,n.asRect=i}),t.extend(function(t,r){function n(r,n,e){var o=new t("circle",this.dom);return o.attr({cx:r,cy:n,r:e}),i.call(o),o}function i(){return this.radius=function(t){return void 0===t?r.toNum(this.attr("r",t)):void this.attr("r",t)},this.center=function(t,n){return void 0===t?{cx:r.toNum(this.attr("cx")),cy:r.toNum(this.attr("cy"))}:(this.attr({cx:t,cy:n}),this)},this}t.prototype.circle=n,n.asCircle=i}),t.extend(function(t,r){function n(r,n,e,o){var s=new t("ellipse",this.dom);return s.attr({cx:r,cy:n,rx:e,ry:o}),i.call(s)}function i(){return this.attr.DirectAccess(this,["+rx","+ry"]),this.center=function(t,n){return void 0===t?{cx:r.toNum(this.attr("cx")),cy:r.toNum(this.attr("cy"))}:(this.attr({cx:t,cy:n}),this)},this}t.prototype.ellipse=n,n.asEllipse=i}),t.extend(function(t,r){function n(r,n,e,o){var s=new t("line",this.dom);return s.attr({x1:r,y1:n,x2:e,y2:o}),i.call(s)}function i(){return this.origin=function(t,n){return void 0===t?{x:r.toNum(this.attr("x1")),y:r.toNum(this.attr("y1"))}:(this.attr({x1:t,y1:n}),this)},this.dest=function(t,n){return void 0===t?{x:r.toNum(this.attr("x2")),y:r.toNum(this.attr("y2"))}:(this.attr({x2:t,y2:n}),this)},this.move=function(t,n){var i=this.attr(["x1","y1","x2","y2"]);return i.x1=r.toNum(i.x1)+t,i.y1=r.toNum(i.y1)+n,i.x2=r.toNum(i.x2)+t,i.y2=r.toNum(i.y2)+n,this.attr(i),this},this}t.prototype.line=n,n.asLine=i}),t.extend(function(t,r){function n(r){var n=a(r);if(null===n)return null;var i=new t("polyline",this.dom);return i._points_array=n.points,i.attr("points",n.points_string),o.call(i)}function i(r){var n=a(r);if(null===n)return null;var i=new t("polygon",this.dom);return i._points_array=n.points,i.attr("points",n.points_string),e.call(i)}function e(){return s.call(this)}function o(){return s.call(this)}function s(){function t(t){return t<-this._points_array.length/2?!1:t>=this._points_array.length/2?!1:!0}return Object.defineProperty(this,"numPoints",{get:function(){return this._points_array.length/2}}),this.points=function(t){if(void 0===t)return this._points_array;var r=a(t);return this._points_array=r.points,this.attr("points",r.points_string),this},this.add=function(t,r,n){if(t<-this._points_array.length/2)return this;if(t>this._points_array.length/2)return this;0>t&&(t=this._points_array.length/2+t);var i=this._points_array;return Array.prototype.splice.call(i,2*t,0,r,n),this.attr("points",i.join(" ")),this},this.remove=function(r){if(t.call(this,r)===!1)return this;0>r&&(r=this._points_array.length/2+r);var n=this._points_array;return Array.prototype.splice.call(n,2*r,2),this.attr("points",n.join(" ")),this},this.point=function(r,n,i){if(t.call(this,r)===!1)return null;if(0>r&&(r=this._points_array.length/2+r),void 0===n)return{x:this._points_array[2*r],y:this._points_array[2*r+1]};var e=this._points_array;return e[2*r]=n,e[2*r+1]=i,this.attr("points",e.join(" ")),this},this.move=function(r,n,i,e){if(void 0!==i&&t.call(this,i)===!1)return this;if(void 0!==e&&t.call(this,e)===!1)return this;void 0===i&&(i=0),void 0===e&&(e=this._points_array.length/2);for(var o=this._points_array,s=2*e,a=2*i;s>a;a+=2)o[a]+=r,o[a+1]+=n;return this.attr("points",o.join(" ")),this},this}function a(t){if(void 0===t||null===t)return null;var n=t,i="";return r.is(t,"array")?(n=t,i=n.join(" ")):r.is(t,"string")&&(i=n,n=i.split(r.regex.split_seperator).map(function(t){return r.toNum(t)})),n.length%2!==0?(console.error("Require an even number of numbers"),null):{points:n,points_string:i}}t.prototype.polyline=n,t.prototype.polygon=i,n.asPolyline=o,i.asPolygon=e}),t.extend(function(t,r){function n(r){var n=new t("path",this.dom);return n._path_cmds=i(r),n.attr("d",e(n._path_cmds)),o.call(n)}function i(t){if(void 0===t||null===t)return null;var n={m:2,l:2,v:1,h:1,z:0,c:6,s:4,q:4,t:2,a:7},i=[];return t.replace(r.regex.pathCommand,function(t,e,o){if(void 0!==e&&null!==e&&void 0!==o&&null!==o&&void 0!==n[e.toLowerCase()]){var s={name:e,values:[]};o.replace(r.regex.pathValues,function(t,r){r&&s.values.push(+r)}),s.values.length<n[e.toLowerCase()]||i.push(s)}}),i}function e(t){for(var r="",n=t.length,i=0;n>i;++i){var e=t[i].name;t[i].values.length>0&&(e+=" "+t[i].values.join(" ")),r=r+e+" "}return r}function o(){return this.d=function(t){return void 0===t?this.attr("d"):(this._path_cmds=i(d),this.attr("d",e(this._path_cmds)))},this.move=function(t,n){for(var i,o,s=this._path_cmds,a=s.length,i=0;a>i;++i)if(r.isUpperCase(s[i].name)){var u=s[i].name,c=s[i].values,h=c.length;if("A"===u)c[5]+=t,c[6]+=n;else if("V"===u)c[0]+=n;else if("H"===u)c[0]+=t;else for(o=0;h>o;o+=2)c[o]+=t,c[o+1]+=n}return this.attr("d",e(this._path_cmds)),this},this.insert=function(t,r){if(t<-this._path_cmds.length)return this;if(t>this._path_cmds.length)return this;0>t&&(t=this._path_cmds.length+t);var n=i(r),o=this._path_cmds.slice(0,t),s=this._path_cmds.slice(t);return this._path_cmds=o.concat(n).concat(s),this.attr("d",e(this._path_cmds)),this},this.remove=function(t){return t<-this._path_cmds.length?this:t>=this._path_cmds.length?this:(0>t&&(t=this._path_cmds.length+t),Array.prototype.splice.call(this._path_cmds,t,1),this.attr("d",e(this._path_cmds)),this)},this.point=function(t){return t<-this._path_cmds.length?this:t>=this._path_cmds.length?this:(0>t&&(t=this._path_cmds.length+t),s(this._path_cmds[t]),this._path_cmds[t])},this.save=function(){return this.attr("d",e(this._path_cmds))},this}function s(t){function r(r){return 0>r?t.values.length+r:r}function n(n){return function(i){return void 0===i?t.values[r(n)]:(t.values[r(n)]=i,t)}}function i(n){return function(i,e){return void 0===i?{x:t.values[r(n[0])],y:t.values[r(n[1])]}:(t.values[r(n[0])]=i,t.values[r(n[1])]=e,t)}}function e(r){return function(n){return void 0===n?!!t.values[r]:(t.values[r]=n?1:0,t)}}var o={x:0,y:1,c1:[0,1],c2:[2,3],end:[-2,-1]},s=t.name.toLowerCase();"v"===s?o.y=0:"h"===s?o.x=0:"a"===s&&(o.x=-2,o.y=-1),t.c1=i(o.c1),t.c2=i(o.c2),t.end=i(o.end),t.x=n(o.x),t.y=n(o.y),"a"===s&&(t.rx=n(0),t.ry=n(1),t.rotation=n(2),t.largeArc=e(3),t.clockwise=e(4))}t.prototype.path=n,n.asPath=o}),t.extend(function(t){function r(r,i,e,o,s){var a=new t("use",this.dom);return void 0!==r&&("#"!==r.charAt(0)&&(r="#"+r),a.attr("xlink:href",r,t.prototype.xlink_ns),void 0!==i&&a.attr("x",i),void 0!==e&&a.attr("y",e),void 0!==o&&a.attr("width",o),void 0!==s&&a.attr("height",s)),n.call(a)}function n(){return this.attr.DirectAccess(this,["+x","+y","+width","+height"]),this.href=function(r){return void 0===r?this.attr("xlink:href"):("#"!==r.charAt(0)&&(r="#"+r),this.attr("xlink:href",r,t.prototype.xlink_ns),this)},this}t.prototype.use=r,r.asUse=n}),t.extend(function(t){function r(r,i,e,o,s){var a=new t("image",this.dom);return void 0!==r&&a.attr("xlink:href",r,t.prototype.xlink_ns),void 0!==i&&a.attr("x",i),void 0!==e&&a.attr("x",e),void 0!==o&&a.attr("width",o),void 0!==s&&a.attr("height",s),n.call(a)}function n(){return this.attr.DirectAccess(this,["+x","+y","+width","+height"]),this.href=function(r){return void 0===r?this.attr("xlink:href"):void this.attr("xlink:href",r,t.prototype.xlink_ns)},this.preserveAspectRatio=function(t,r,n){return r=void 0===r?"":r,n(n===udnefined)?"":n,this.attr("preserveAspectRatio",r+" "+t+" "+n),this},this}t.prototype.image=r,r.asImage=n}),t.extend(function(t,r){function n(r,n,i){var e=new t("text",this.dom);return void 0!==n&&void 0!==i&&e.attr({x:n,y:i}),void 0===r&&(r=""),e._text_textNode=t.prototype.createTextNode(r),e.dom.appendChild(e._text_textNode),s.call(e)}function i(r,n){if(void 0===n&&(n=""),r.dom.contains(r._text_textNode))r._text_textNode.nodeValue=n;else{for(var i=r.dom.childNodes,e=i.length,o=!1,s=0;e>s;++s)if("#text"===i[s].nodeName){r._text_textNode=i[s],o=!0;break}o===!1&&(r._text_textNode=t.prototype.createTextNode(n)),r.dom.appendChild(r._text_textNode)}}function e(t,r){if(t.hasChildNodes()===!1)return"#text"===t.nodeName?t.nodeValue:"";for(var n="",i=t.childNodes,o=i.length,s=0;o>s;++s)r?n+=e(i[s],r):"#text"===i[s].nodeName&&(n+=i[s].nodeValue);return n}function o(t,r){return r?e(t.dom,!0):t.dom.contains(t._text_textNode)?t._text_textNode.nodeValue:""}function s(){this.text=function(t){return void 0===t||r.is(t,"boolean")?o(this,t):(i(this,t),this)},this.x=function(t){return r.toNum(this.attr("x",t))},this.y=function(t){return r.toNum(this.attr("y",t))};var t=[{desired:"anchor",real:"text-anchor"},{desired:"decoration",real:"text-decoration"},{desired:"rendering",real:"text-rendering",isNum:!0},{desired:"textLength",real:"textLength",isNum:!0},{desired:"lengthAdjust",real:"lengthAdjust"},{desired:"kerning",real:"kerning",isNum:!0},{desired:"letter_spacing",real:"letter-spacing",isNum:!0},{desired:"word_spacing",real:"word-spacing",isNum:!0},{desired:"writing_mode",real:"writing-mode"},{desired:"glyph_orientation_vertical",real:"glyph-orientation-vertical",isNum:!0},{desired:"direction",real:"direction"}];return this.attr.DirectAccessDiffName(this,t),this}t.prototype.text=n,n.asText=s}),t.extend(function(t,r){function n(r,n,e){var o=new t("tspan",this.dom);return i.call(o),void 0!==r&&o.text(r),void 0!==n&&o.dx(n),void 0!==n&&o.dy(e),o}function i(){return u.call(this),this}function e(r,n,i){var e=new t("tref",this.dom);return o.call(e),void 0!==r&&e.href(r),void 0!==n&&e.dx(n),void 0!==i&&e.dy(i),e}function o(){return u.call(this),this.href=function(r){return void 0===r?this.attr("xlink:href"):("#"!==r.charAt(0)&&(r="#"+r),this.attr("xlink:href",r,t.prototype.xlink_ns),this)},this}function s(r,n){var i=new t("textPath",this.dom);return a.call(i),i.href(r),void 0!==n&&i.text(n),i}function a(){return u.call(this),this.href=function(r){return void 0===r?this.attr("xlink:href"):("#"!==r.charAt(0)&&(r="#"+r),this.attr("xlink:href",r,t.prototype.xlink_ns),this)},this}function u(){t.prototype.text.asText.call(this);for(var n=["dx","dy"],i=0;i<n.length;++i)this[n[i]]=function(t,n){return function(i){if(void 0===i){var e=t.attr(n);return e=e.split(r.regex.split_seperator).map(function(t){return r.toNum(t)})}return r.is(i,"array")?t.attr(n,i.join(" ")):(r.is(i,"string")||r.is(i,"number"))&&t.attr(n,i),t}}(this,n[i]);return function(t){t.baseline=function(){},t.baseline.shift=function(r){return t.attr("baseline-shift",r)},t.baseline.alignment=function(r){return t.attr("alignment-baseline",r)},t.baseline.dominant=function(r){return t.attr("dominant-baseline",r)}}(this),this}t.prototype.tspan=n,t.prototype.tref=e,t.prototype.textPath=s,n.asTspan=i,e.asTref=o,s.asTextPath=a}),t});