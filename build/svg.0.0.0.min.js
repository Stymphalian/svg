!function(t,r){"function"==typeof define&&define.amd?define(r):"object"==typeof exports?exports.svg=r():t.svg=r()}(this,function(){var t=function(){function t(){}return t.util={},t.svgElem={},t.version="0.0.0",t.modules={},t.module=function(r){r(t)},t.extend=function(r){r(t.svgElem,t.util,t.modules)},t.plugin=function(r,n){var e=t.svgElem,i=Object.prototype.hasOwnProperty,o=r(t.svgElem,t.util,t.modules);i.call(o,"name")!==!1&&i.call(o,"constructor")!==!1&&(void 0===n&&(n=!1),(t.plugin.has[o.name]!==!0||n!==!1)&&(t.plugin.has[o.name]=!0,Object.defineProperty(e.prototype,o.name,{get:function(){var t=new o.constructor(this);return Object.defineProperty(this,o.name,{value:t,writable:!0,configurable:!0,enumerable:!0}),t},set:function(){},configurable:!0,enumerable:!0})))},t.plugin.has={},t}();return t.module(function(t){function r(){}function n(t){return null===t?null:i(t)===!1?t+"%":t}function e(t){return null===t?null:r.toNum(i(t)?t.slice(0,-1):t)}function i(t){return r.is(t,"string")===!1?!1:"%"===t.charAt(-1)}t.util=r,r.regex={split_seperator:/[, ]/,pathCommand:/([a-z])[,\s]*((-?\d+\.?\d*(?:e[+-]?\d+)?\s*,?\s*)*)/gi,transformCommand:/([a-zXY]*)\s*\(\s*((-?\d+\.?\d*(?:e[+-]?\d+)?\s*,?\s*)*)\)/gi,values:/(-?\d+\.?\d*(?:e[+-]?\d+)?)\s*,?\s*/gi,number:/(-?\d+\.?\d*(?:e[+-]?\d+)?)/},r.is=function(t,r){if(void 0===t||null===t)return!1;var n=Object.prototype.toString.call(t).toLowerCase(),e="[object ",i=n.substring(e.length,e.length+r.length);return i===r},r.isUpperCase=function(t){return t.toUpperCase()===t},r.toNum=function(t){if(null===t)return null;var r=+t;return isNaN(+t)?t:r},r.toRad=function(t){return t*Math.PI/180},r.toDeg=function(t){return 180*t/Math.PI},r.mixin=function(t,r,n){n=void 0===n?!1:n;for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(n||!Object.prototype.hasOwnProperty.call(t,e))&&(t[e]=r[e]);return t},r.mixinUsingFunc=function(t,r,n){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=n(t,r,e));return t},r.mixinFromExports=function(t,r,n,e){if(!n||"[object Array]"!=Object.prototype.toString.call(n)){e=void 0===e?!1:e;var i,o,s=n.length;for(i=0;s>i;++i)o=n[i],Object.prototype.hasOwnProperty.call(r,o)&&(e||!Object.prototype.hasOwnProperty.call(t,o))&&(t[o]=r[o]);return t}},r.arrayOrString=function(t){var n=t,e="";return r.is(t,"array")?(n=t,e=n.join(" ")):r.is(t,"string")&&(e=n,n=e.split(r.regex.split_seperator).map(function(t){return r.toNum(t)})),{points:n,points_string:e}},r.clone=function(t){function n(t,r,n){var e,i,o={};for(e in r)i=r[e],(!1==e in t||t[e]!==i&&(e in o==0||o[e]!==i))&&(t[e]=n?n(i):i);return t}if(!t||"object"!=typeof t||r.is(t,"function"))return t;if(t.nodeType&&"cloneNode"in t)return t.cloneNode(!0);if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);var e;if(r.is(t,"array")){e=[];for(var i=t.length,o=0;i>o;++o)e.push(r.clone(t[o]))}else e=t.constructor?new t.constructor:{};return n(e,t,r.clone)},r.convertToPercentString=n,r.convertFromPercentString=e,r.isPercentString=i}),t.module(function(t){function r(t,e){t&&"[object String]"===Object.prototype.toString.call(t)?this.dom=n.document.createElementNS(r.prototype.svg_ns,t):void 0!==t&&null!==t&&(this.dom=t),e&&e.appendChild(this.dom)}t.svgElem=r;var n={window:window,document:window.document};r.prototype.svg_ns="http://www.w3.org/2000/svg",r.prototype.xlink_ns="http://www.w3.org/1999/xlink",r.prototype.xml_ns="http://www.w3.org/2000/xmlns/",r.prototype.clear=function(){for(;this.dom.firstChild;)this.dom.removeChild(this.dom.firstChild);return this},r.prototype.remove=function(){this.clear(),this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom)},r.prototype.reRunMixin=function(){function t(t){return t.charAt(0).toUpperCase()+t.slice(1)}var n=this.dom.tagName;"switch"===n&&(n="switchElem");var e=r.prototype[n],i=e["as"+t(e.name)];i&&"[object Function]"===Object.prototype.toString.call(i)&&(i=[i]);for(var o=0;o<i.length;++o)i[o].call(this);return this},r.prototype.clone=function(){var r=t.util.clone(this);for(var n in r)void 0!==t.plugin.has[n]&&Object.prototype.hasOwnProperty.call(r,n)&&delete r[n];return r.reRunMixin(),this.dom.parentNode&&this.dom.parentNode.appendChild(r.dom),r},r.prototype.createTextNode=function(t){return n.document.createTextNode(t)},r.prototype.url=function(t){return void 0===t?null:"url("+t+")"}}),t.module(function(t){function r(){}t.modules.common=r;var n=(t.util,t.svgElem);r.asViewport=function(){return this.viewBox=function(t,r,n,e){if(void 0===t){var i=this.attr("viewBox");return null===i?null:(i=i.split(" "),{x:parseFloat(i[0]),y:parseFloat(i[1]),w:parseFloat(i[2]),h:parseFloat(i[3])})}this.attr("viewBox",[t,r,n,e].join(" "))},this.preserveAspectRatio=function(t,r,n){return r=void 0===r?"":r,n(n===udnefined)?"":n,this.attr("preserveAspectRatio",r+" "+t+" "+n),this},this.zoom=function(){return console.warn("zoom not implemented"),this},this},r.asXlinkable=function(){return this.href=function(t){return void 0===t?this.attr("xlink:href"):("#"!==t.charAt(0)&&(t="#"+t),this.attr("xlink:href",t,n.prototype.xlink_ns),this)},this},r.makePointProperty=function(t,r,n){return function(e,i){if(void 0===e){e=this.attr(t),i=this.attr(r),void 0!==n&&(e=n(e,!0),i=n(e,!0));var o={};return o[t]=e,o[r]=i,o}return void 0!==n&&(e=n(e,!1),i=n(i,!1)),this.attr(t,e),this.attr(r,i),this}}}),t.extend(function(t,r){function n(){}function e(t){return 0>t?0:t>255?255:t}t.prototype.colorUtil=new n,n.prototype.rgb2hex=function(t,r,n){var i=["#",0,0,0];return i[1]=Number.prototype.toString.call(e(t),16),i[2]=Number.prototype.toString.call(e(r),16),i[3]=Number.prototype.toString.call(e(n),16),Array.prototype.join.call(i,"")},n.prototype.hex2rgb=function(t){return t="#"===t.charAt(0)?t.substring(1,7):t,{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16)}},n.prototype.asHex=function(t,e,i){if(void 0===t)return null;if(r.is(t,"string"))return"#"!==a.charAt(0)&&(t="#"+t),t;if(void 0!==e&&void 0!==i)return n.prototype.rgb2hex(t,e,i)}}),t.extend(function(t,r){function n(t,r,n,e){return void 0!==r&&void 0!==n?(void 0===e||null===e?t.setAttribute(r,n):t.setAttributeNS(e,r,n),this):void 0}function e(t,r,n){return void 0!==r?(void 0===n||null===n?t.removeAttribute(r):t.removeAttributeNS(n,r),this):void 0}function i(t,r,n){return o(this,this.dom,t,r,n)}function o(t,i,o,s,a){if(void 0===o)return function(t,r){for(var n,e,i=[],o=r.attributes.length,s=0;o>s;++s)n=r.attributes[s].name,e=r.attributes[s].value,i.push([n,e]);return i}(t,i);if(r.is(o,"object")){a=void 0!==s?s:null;for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&n(i,u,o[u],a);return t}if(r.is(o,"string")){if(void 0===s){var c=i.attributes[o];return null!==c&&void 0!==c?c.value:null}return void 0===a&&(a=null),null===s?e(i,o,a):n(i,o,s,a),t}if(r.is(o,"array")){void 0===a&&(a=null);var l=o.length,h=0;if(r.is(s,"boolean")&&s===!0){for(h=0;l>h;++h)e(i,o[h],a);return t}var c={};for(h=0;l>h;++h){var d=i.attributes[o[h]];void 0!==d&&null!==d&&null!==d.value&&(c[o[h]]=d.value)}return c}}t.prototype.attr=i,i.attrInternal=o,i._defineProperty=function(t,r,n,e){return Object.defineProperty(t,r,{get:n,set:e,configurable:!0,enumerable:!0}),t},i.DirectAccessNoFunction=function(t,n,e){if(void 0===e&&(e=t),r.is(t,"array")===!0)return console.error("context must be an object"),null;for(var o=n.length,s=0;o>s;++s){{n[s]}!function(n,o,s,a){void 0===o&&(o=n),void 0===s&&(s=!1),void 0===a&&(a=function(t){return t}),i._defineProperty(t,n,function(){a(e.attr(o),!0);return s?r.toNum(e.attr(o)):e.attr(o)},function(t){var r=a(t,!1);return null===r?e.attr_rm(o):e.attr(o,r),e})}(n[s].desired,n[s].real,n[s].isNum,n[s].munger)}},i.DirectAccess=function(t,n,e){if(void 0===e&&(e=t),r.is(t,"array")===!0)return console.error("context must be an object"),null;for(var i=n.length,o=0;i>o;++o){var s=n[o];t[s.desired]=function(t,n,i,o){return void 0===i&&(i=!1),void 0===n&&(n=t),void 0===o&&(o=function(t){return t}),function(t){var s=null;return void 0===t?(s=o(e.attr(n),!0),i?r.toNum(s):s):(s=o(t,!1),e.attr(n,s),e)}}(s.desired,s.real,s.isNum,s.munger)}}}),t.plugin(function(t,r){function n(t){function n(t){return null!==t.attr("cx")}function e(t){return null!==t.attr("rx")}if(void 0===t||null===t)return this;var i=[{desired:"x",isNum:!0},{desired:"y",isNum:!0},{desired:"width",isNum:!0},{desired:"height",isNum:!0},{desired:"rx",isNum:!0},{desired:"ry",isNum:!0},{desired:"r",isNum:!0},{desired:"cx",isNum:!0},{desired:"cy",isNum:!0}];return t.attr.DirectAccessNoFunction(this,i,t),this.pos=function(e,i){return n(t)?void 0===e?{cx:r.toNum(t.attr("cx")),cy:r.toNum(t.attr("cy"))}:(t.attr({cx:e,cy:i}),t):void 0===e?{x:r.toNum(t.attr("x")),y:r.toNum(t.attr("y"))}:(t.attr({x:e,y:i}),t)},this.size=function(i,o){return e(t)?void 0===i?{rx:r.toNum(t.attr("rx")),ry:r.toNum(t.attr("ry"))}:(t.attr({rx:i,ry:o}),t):n(t)?void 0===i?{r:r.toNum(t.attr("r"))}:(t.attr({r:i}),t):void 0===i?{width:r.toNum(t.attr("width")),height:r.toNum(t.attr("height"))}:(t.attr({width:i,height:o}),t)},this.move=function(e,i){if(void 0===e)return null;if(null!==t.attr("points"));else if(null!==t.attr("x1")){var o=t.attr(["x1","y1","x2","y2"]);return o.x1=r.toNum(o.x1)+e,o.y1=r.toNum(o.y1)+i,o.x2=r.toNum(o.x2)+e,o.y2=r.toNum(o.y2)+i,t.attr(o),t}var o=this.pos();return t.attr(n(t)?{cx:e+o.cx,cy:i+o.cy}:{x:e+o.x,y:i+o.y}),t},this}return{name:"shape",constructor:function(t){return n.call(this,t),this}}}),t.plugin(function(t,r){function n(t){var n={translate:2,rotate:[1,3],scale:2,skewX:1,skewY:1,matrix:6},e=[];return t.replace(r.regex.transformCommand,function(t,i,o){if(void 0!==n[i]){var s={name:i,values:[]};if(o.replace(r.regex.values,function(t,n){n&&s.values.push(r.toNum(n))}),r.is(n[i],"array")){for(var a=n[i].length,u=!1,c=0;a>c;++c)if(s.values.length===n[i][c]){u=!0;break}if(u===!1)return}else if(s.values.length<n[i])return;e.push(s)}}),e}function e(t){return t.name+"("+t.values.join(",")+")"}function i(t,r){return void 0===r?t._transform_values:r<-t._transform_values.length?null:r>=t._transform_values.length?null:(0>r&&(r=t._transform_values.length+r),u(t._transform_values[r]))}function o(t,r){if(void 0===r||null===r)return t;var e=n(r);return t._transform_values=e,t.attr(t._transform_name,r),t}function s(t){for(var r="",n=t._transform_values.length,i=0;n>i;++i)r+=e(t._transform_values[i]),i!==n-1&&(r+=" ");return t.attr(t._transform_name,r),t}function a(t){return void 0===t||null===t?this:(this.clear=function(){for(;t._transform_values.length>0;)t._transform_values.pop();t.attr(t._transform_name,"")},this.save=function(){return s(t)},this.translate=function(r,n){return t._transform_values.push({name:"translate",values:[r,n]}),s(t),t},this.rotate=function(r,n,e){var i=[];return void 0!==n&&i.push(n),void 0!==e&&i.push(e),i.push(r),t._transform_values.push({name:"rotate",values:i}),s(t),t},this.scale=function(r,n){return void 0!==r&&void 0===n&&(n=r),t._transform_values.push({name:"scale",values:[r,n]}),s(t),t},this.skew=function(r,n){return t._transform_values.push({name:"skewX",values:[r]}),t._transform_values.push({name:"skewY",values:[n]}),s(t),t},this.matrix=function(n){return r.is(n,"string")&&(n=n.split(r.regex.split_seperate,function(t){return r.toNum(t)})),r.is(n,"array")&&6===n.length&&(n=r.clone(n)),6!=n.length?t:(t._transform_values.push({name:"matrix",values:n}),s(t),t)},this.matrix.identity=function(){return[1,0,0,1,0,0]},this.fromStringToObject=n,void(this.updateFromDom=function(){var r=t.attr(t._transform_name);if(void 0===r||null===r)return[];var e=n(r);return t._transform_values=e,e}))}function u(t){return t}return{name:"transform",constructor:function(t){var n=function(n){return void 0===n?i(t):r.is(n,"string")?(o(t,n),t):r.is(n,"number")?i(t,n):void 0};return void 0!==t&&null!==t&&(t._transform_values=[],t._transform_name="linearGradient"===t.dom.nodeName||"radialGradient"===t.dom.nodeName?"gradientTransform":"pattern"===t.dom.nodeName?"patternTransform":"transform"),a.call(n,t),n}}}),t.plugin(function(t,r){function n(t){var r=function(r){return t.attr("style",r)};return e.call(r,t),r}function e(t){function n(t){return 0>t&&(t=0),t>1&&(t=1),t}function e(t,e){if(void 0===e){var e=this.attr(t);return null!=e?r.toNum(e):null}return e=n(r.toNum(e)),this.attr(t,e),this}function i(t,n){var e;return void 0===n?(e=this.attr(t),null===e?null:e=e.split(" ").map(function(t){return r.toNum(t)})):(e=r.is(n,"array")?n.join(" "):n,this.attr(t,e),this)}function o(r){return t.attr("stroke",r)}function s(r){return t.attr("fill",r)}function a(){}return void 0===t||null===t?this:(this.stroke=o,o.url=function(r){return void 0===r?null:t.attr("stroke","url("+r+")")},o.width=function(n){return r.toNum(t.attr("stroke-width",n))},o.opacity=function(r){return e.call(t,"stroke-opacity",r)},o.dasharray=function(r){return i.call(t,"stroke-dasharray",r)},o.dashoffset=function(n){return r.toNum(t.attr("stroke-dashoffset",n))},o.linecap=function(r){return t.attr("stroke-linecap",r)},o.linejoin=function(r){return t.attr("stroke-linejoin",r)},o.miterlimit=function(n){return 1>n&&(n=1),r.toNum(t.attr("miterlimit",n))},this.fill=s,s.url=function(r){return void 0===r?null:t.attr("fill","url("+r+")")},s.opacity=function(r){return e.call(t,"fill-opacity",r)},s.rule=function(r){return t.attr("fill-rule",r)},this.marker=a,a.start=function(){},a.mid=function(){},void(a.end=function(){}))}return{name:"style",constructor:n}}),t.plugin(function(t){function r(r){return void 0===r||null===r?this:(this.parse=function(r){function n(t){return t.charAt(0).toUpperCase()+t.slice(1)}if(void 0===r)return null;var e=r.tagName.toLowerCase();"switch"===e&&(e="switchElem");var i=new t(r),o=t.prototype[e];return o["as"+n(o.name)].call(i),i},this)}return{name:"lex",constructor:function(t){return r.call(this,t),this}}}),t.plugin(function(){function t(t){if(void 0===t||null===t)return this;var r=[{desired:"family",real:"font-family"},{desired:"size",real:"font-size"},{desired:"size_adjust",real:"font-size-adjust"},{desired:"stretch",real:"font-stretch"},{desired:"style",real:"font-style"},{desired:"variant",real:"font-variant"},{desired:"weight",real:"font-weight"}];return t.attr.DirectAccessNoFunction(this,r,t),this}return{name:"font",constructor:function(r){return t.call(this,r),this}}}),t.plugin(function(){function t(t){return r.call(this,t),this}function r(t){function r(t,r,n){if(void 0===n){var e=t.attr(r);return void 0===e||null==e?"":e.slice(5,-1)}return"#"!==n.charAt(0)&&(n="#"+n),t.attr(r,"url("+n+")"),t}return this.start=function(n){return r(t,"marker-start",n)},this.mid=function(n){return r(t,"marker-mid",n)},this.end=function(n){return r(t,"marker-end",n)},t}return{name:"mark",constructor:t}}),t.extend(function(t,r,n){function e(){return this.pos=function(t,r){if(void 0===t){var n=this.attr.y;if(null!==n)return{x:n[0],y:n[1]}}else this.attr({x:t,y:r})},n.common.asViewport.call(this),this}t.prototype.svg=function(r,n,i,o){var s=new t("svg",this.dom);return s.attr({x:r,y:n,width:i,height:o}),e.call(s),s},t.prototype.svg.asSvg=e}),t.module(function(t){function r(t,r,e){var i=document.getElementById(t);if(null===i)return console.error("Invalid parent container id"),null;void 0===r&&(r=i.clientWidth),void 0===e&&(e=i.clientHeight);var o=new n("svg",i);return o.attr({x:0,y:0,width:r,height:e}),n.prototype.svg.asSvg.call(o),o.dom.setAttribute("xmlns",n.prototype.svg_ns),o.dom.setAttributeNS(n.prototype.xml_ns,"xmlns:xlink",n.prototype.xlink_ns),o.attr({version:"1.1",baseProfile:"full"}),o}t.svgRoot=r;var n=t.svgElem;n.prototype.svgRoot=r,r.asSvgRoot=n.prototype.svg.asSvg}),t.extend(function(t){function r(){var r=new t("g",this.dom);return n.call(r)}function n(){return this}t.prototype.g=r,r.asG=n}),t.extend(function(t){function r(r){var e=new t("defs",this.dom);return e._defs_id=void 0===r?"defs_"+Date.now().toString()+"_":r,e._defs_start_id=0,e._defs_cache={},n.call(e)}function n(){return this.store=function(t,r,n){(n||void 0===this._defs_cache[t])&&(this._defs_cache[t]=r)},this.get=function(t){return this._defs_cache[t]},this.drop=function(t){delete this._defs_cache[t]},this.dropAll=function(){this._defs_cache={}},this.url=function(){return this._defs_start_id+=1,this._defs_id+this._defs_start_id.toString()},this}t.prototype.defs=r,r.asDefs=n}),t.extend(function(t,r,n){function e(r){var n=new t("symbol",this.dom);return void 0!==r&&n.attr("id",r),i.call(n)}function i(){return this.id=function(t){return this.attr("id",t)},n.common.asViewport.call(this),this}t.prototype.symbol=e,e.asSymbol=i}),t.extend(function(t){function r(){new t("switch",this.dom);return n.call(this)}function n(){return this}t.prototype.switchElem=r,r.asSwitchElem=n}),t.extend(function(t){function r(r){var e=new t("a",this.dom);return n.call(e),e.href(r),e}function n(){return this.href=function(r){return void 0===r?this.attr("xlink:href"):(this.attr("xlink:href",r,t.prototype.xlink_ns),this)},this.show=function(r){return void 0===r?this.attr("xlink:show"):(this.attr("xlink:href",r,t.prototype.xlink_ns),this)},this.target=function(t){return this.attr("target",t)},this}t.prototype.a=r,r.asA=n}),t.extend(function(t,r,n){function e(r,n,e){var o=new t("marker",this.dom);return o.attr({id:r,markerWidth:n,markerHeight:e}),i.call(o),o}function i(){var t=[{desired:"id"},{desired:"x",real:"refX",isNum:!0},{desired:"y",real:"refY",isNum:!0},{desired:"width",real:"markerWidth",isNum:!0},{desired:"height",real:"markerHeight",isNum:!0},{desired:"units",real:"markerUnits"},{desired:"orient",isNum:!0}];return this.attr.DirectAccess(this,t),this.useUserSpace=function(t){if(void 0===t){var r=this.attr("markerUnits");return null!==r&&void 0!==r?"userSpaceOnUse"===r:!1}return t&&this.attr("markerUnits","userSpaceOnUse"),this},this.ref=function(t,n){return void 0===t?{x:r.toNum(this.attr("refX")),y:r.toNum(this.attr("refY"))}:(this.attr({refX:t,refY:n}),this)},n.common.asViewport.call(this),this}t.prototype.marker=e,e.asMarker=i}),t.extend(function(t,r,n){function e(n,e,i,s,a){var u=new t("linearGradient",this.dom);return o.call(u),u.attr({id:n,x1:r.convertToPercentString(e),y1:r.convertToPercentString(i),x2:r.convertToPercentString(s),y2:r.convertToPercentString(a)}),u._stops_array=[],u}function i(){function n(t){for(var r=[],n=t.childNodes,e=n.length,i=0;e>i;++i)"stop"===n[i].nodeName&&r.push(n[i]);return r}function e(r){var n=t.prototype.attr.attrInternal,e=[],i=0,o=r.length;for(i=0;o>i;++i)e.push({offset:n(r[i],"offset"),"stop-color":n(r[i],"stop-color"),"stop-opacity":n(r[i],"stop-opacity")});return e}function i(e,i){for(var o=t.prototype.attr.attrInternal,s=n(e.dom);s.length<i.length;){var a=e.stop(0,0,0);s.push(a.dom)}for(var u=0,c=s.length,l=0;c>l;++l)o(e,s[l],{offset:r.convertToPercentString(i[l].offset),"stop-color":i[l].color,"stop-opacity":i[l].opacity}),u+=1;if(u<s.length){var h=s[u],d=u;c=s.length;for(var d=u;d<s.length;++d)h.removeChild(s[d])}return e}var o=[{desired:"id"},{desired:"spreadMethod"},{desired:"units",real:"gradientUnits"},{desired:"gradientUnits"}];return this.attr.DirectAccess(this,o),this.stops=function(t){if(void 0===t)return this._stops_array;if(r.is(t,"number")){var n=t;return n<-this._stops_array.length?this:n>=this._stops_array.length?this:(0>n&&(n=this._stops_array.length+n),this._stops_array[n])}var e=t.length;this._stops_array=[];for(var o=0;e>o;++o)this._stops_array.push({offset:t[o][0],color:t[o][1],opacity:t[o][2]});return i(this,this._stops_array),this},this.save=function(){return i(this,this._stops_array),this},this.updateFromDom=function(){var t=n(this.dom);this._stops_array=e(t)},this}function o(){i.call(this),n.common.asXlinkable.call(this);var t=[{desired:"x1",isNum:!0,munger:u},{desired:"y1",isNum:!0,munger:u},{desired:"x2",isNum:!0,munger:u},{desired:"y2",isNum:!0,munger:u}];return this.attr.DirectAccess(this,t),this.start=function(t,n){return void 0===t?(t=r.convertFromPercentString(this.attr("x1")),n=r.convertFromPercentString(this.attr("y1")),{x:r.toNum(t),y:r.toNum(n)}):(this.attr({x1:r.convertToPercentString(t),y1:r.convertToPercentString(n)}),this)},this.end=function(t,n){return void 0===t?(t=r.convertFromPercentString(this.attr("x2")),n=r.convertFromPercentString(this.attr("y2")),{x:r.toNum(t),y:r.toNum(n)}):(this.attr({x2:r.convertToPercentString(t),y2:r.convertToPercentString(n)}),this)},this}function s(n,e,i,o){var s=new t("radialGradient",this.dom);return a.call(s),s.attr({id:n,fx:r.convertToPercentString(e),fy:r.convertToPercentString(i),r:r.convertToPercentString(o)}),s}function a(){i.call(this),n.common.asXlinkable.call(this);var t=[{desired:"cx",isNum:!0,munger:u},{desired:"cy",isNum:!0,munger:u},{desired:"fx",isNum:!0,munger:u},{desired:"fy",isNum:!0,munger:u},{desired:"r",isNum:!0,munger:u}];return this.attr.DirectAccess(this,t),this.center=n.common.makePointProperty("cx","cy",u),this.focal=n.common.makePointProperty("fx","fy",u),this}function u(t,n){return n?r.convertFromPercentString(t):r.convertToPercentString(t)}t.prototype.linearGradient=e,e.asLinearGradient=o,t.prototype.radialGradient=s,s.asRadialGradient=a}),t.extend(function(t,r){function n(n,e){var o=new t("stop",this.dom);return o.attr({offset:r.convertToPercentString(n),"stop-color":e,"stop-opacity":1}),i.call(o),o}function e(t,n){return n?r.convertFromPercentString(t):r.convertToPercentString(t)}function i(){var t=[{desired:"offset",isNum:!0,munger:e},{desired:"color",real:"stop-color"},{desired:"opacity",real:"stop-opacity",isNum:!0}];this.attr.DirectAccess(this,t)}t.prototype.stop=n,n.asStop=i}),t.extend(function(t,r,n){function e(r,n,e,o,s){var a=new t("pattern",this.dom);return a.attr({id:r,x:n,y:e,width:o,height:s,patternUnits:"userSpaceOnUse"}),i.call(a),a}function i(){var t=[{desired:"id"},{desired:"units",real:"patternUnits"},{desired:"contentUnits",real:"patternContentUnits"},{desired:"x",isNum:!0},{desired:"y",isNum:!0},{desired:"width",isNum:!0},{desired:"height",isNum:!0}];return this.attr.DirectAccess(this,t),n.common.asViewport.call(this),n.common.asXlinkable.call(this),this}t.prototype.pattern=e,e.asPattern=i}),t.extend(function(t,r){function n(r,n,i,o){var s=new t("rect",this.dom);return s.attr({x:r,y:n,width:i,height:o}),e.call(s)}function e(){return this.round=function(t,n){return void 0===t?{rx:r.toNum(this.attr("rx")),ry:r.toNum(this.attr("ry"))}:(this.attr({rx:t,ry:n}),this)},this}t.prototype.rect=n,n.asRect=e}),t.extend(function(t,r){function n(r,n,i){var o=new t("circle",this.dom);return o.attr({cx:r,cy:n,r:i}),e.call(o),o}function e(){return this.radius=function(t){return void 0===t?r.toNum(this.attr("r",t)):void this.attr("r",t)},this.center=function(t,n){return void 0===t?{cx:r.toNum(this.attr("cx")),cy:r.toNum(this.attr("cy"))}:(this.attr({cx:t,cy:n}),this)},this}t.prototype.circle=n,n.asCircle=e}),t.extend(function(t,r){function n(r,n,i,o){var s=new t("ellipse",this.dom);return s.attr({cx:r,cy:n,rx:i,ry:o}),e.call(s)}function e(){var t=[{desired:"rx",isNum:!0},{desired:"ry",isNum:!0}];return this.attr.DirectAccess(this,t),this.center=function(t,n){return void 0===t?{cx:r.toNum(this.attr("cx")),cy:r.toNum(this.attr("cy"))}:(this.attr({cx:t,cy:n}),this)},this}t.prototype.ellipse=n,n.asEllipse=e}),t.extend(function(t,r){function n(r,n,i,o){var s=new t("line",this.dom);return s.attr({x1:r,y1:n,x2:i,y2:o}),e.call(s)}function e(){return this.origin=function(t,n){return void 0===t?{x:r.toNum(this.attr("x1")),y:r.toNum(this.attr("y1"))}:(this.attr({x1:t,y1:n}),this)},this.dest=function(t,n){return void 0===t?{x:r.toNum(this.attr("x2")),y:r.toNum(this.attr("y2"))}:(this.attr({x2:t,y2:n}),this)},this.move=function(t,n){var e=this.attr(["x1","y1","x2","y2"]);return e.x1=r.toNum(e.x1)+t,e.y1=r.toNum(e.y1)+n,e.x2=r.toNum(e.x2)+t,e.y2=r.toNum(e.y2)+n,this.attr(e),this},this}t.prototype.line=n,n.asLine=e}),t.extend(function(t,r){function n(r){var n=a(r);if(null===n)return null;var e=new t("polyline",this.dom);return e._points_array=n.points,e.attr("points",n.points_string),o.call(e)}function e(r){var n=a(r);if(null===n)return null;var e=new t("polygon",this.dom);return e._points_array=n.points,e.attr("points",n.points_string),i.call(e)}function i(){return s.call(this)}function o(){return s.call(this)}function s(){function t(t){return t<-this._points_array.length/2?!1:t>=this._points_array.length/2?!1:!0}return Object.defineProperty(this,"numPoints",{get:function(){return this._points_array.length/2}}),this.points=function(t){if(void 0===t)return this._points_array;var r=a(t);return this._points_array=r.points,this.attr("points",r.points_string),this},this.add=function(t,r,n){if(t<-this._points_array.length/2)return this;if(t>this._points_array.length/2)return this;0>t&&(t=this._points_array.length/2+t);var e=this._points_array;return Array.prototype.splice.call(e,2*t,0,r,n),this.attr("points",e.join(" ")),this},this.remove=function(r){if(t.call(this,r)===!1)return this;0>r&&(r=this._points_array.length/2+r);var n=this._points_array;return Array.prototype.splice.call(n,2*r,2),this.attr("points",n.join(" ")),this},this.point=function(r,n,e){if(t.call(this,r)===!1)return null;if(0>r&&(r=this._points_array.length/2+r),void 0===n)return{x:this._points_array[2*r],y:this._points_array[2*r+1]};var i=this._points_array;return i[2*r]=n,i[2*r+1]=e,this.attr("points",i.join(" ")),this},this.move=function(r,n,e,i){if(void 0!==e&&t.call(this,e)===!1)return this;if(void 0!==i&&t.call(this,i)===!1)return this;void 0===e&&(e=0),void 0===i&&(i=this._points_array.length/2);for(var o=this._points_array,s=2*i,a=2*e;s>a;a+=2)o[a]+=r,o[a+1]+=n;return this.attr("points",o.join(" ")),this},this}function a(t){if(void 0===t||null===t)return null;var n=t,e="";return r.is(t,"array")?(n=t,e=n.join(" ")):r.is(t,"string")&&(e=n,n=e.split(r.regex.split_seperator).map(function(t){return r.toNum(t)})),n.length%2!==0?(console.error("Require an even number of numbers"),null):{points:n,points_string:e}}t.prototype.polyline=n,t.prototype.polygon=e,n.asPolyline=o,e.asPolygon=i}),t.extend(function(t,r){function n(r){var n=new t("path",this.dom);return n._path_cmds=e(r),n.attr("d",i(n._path_cmds)),o.call(n)}function e(t){if(void 0===t||null===t)return null;var n={m:2,l:2,v:1,h:1,z:0,c:6,s:4,q:4,t:2,a:7},e=[];return t.replace(r.regex.pathCommand,function(t,i,o){if(void 0!==i&&null!==i&&void 0!==o&&null!==o&&void 0!==n[i.toLowerCase()]){var s={name:i,values:[]};o.replace(r.regex.values,function(t,r){r&&s.values.push(+r)}),s.values.length<n[i.toLowerCase()]||e.push(s)}}),e}function i(t){for(var r="",n=t.length,e=0;n>e;++e){var i=t[e].name;t[e].values.length>0&&(i+=" "+t[e].values.join(" ")),r=r+i+" "}return r}function o(){return this.d=function(t){return void 0===t?this.attr("d"):(this._path_cmds=e(d),this.attr("d",i(this._path_cmds)))},this.move=function(t,n){for(var e,o,s=this._path_cmds,a=s.length,e=0;a>e;++e)if(r.isUpperCase(s[e].name)){var u=s[e].name,c=s[e].values,l=c.length;if("A"===u)c[5]+=t,c[6]+=n;else if("V"===u)c[0]+=n;else if("H"===u)c[0]+=t;else for(o=0;l>o;o+=2)c[o]+=t,c[o+1]+=n}return this.attr("d",i(this._path_cmds)),this},this.insert=function(t,r){if(t<-this._path_cmds.length)return this;if(t>this._path_cmds.length)return this;0>t&&(t=this._path_cmds.length+t);var n=e(r),o=this._path_cmds.slice(0,t),s=this._path_cmds.slice(t);return this._path_cmds=o.concat(n).concat(s),this.attr("d",i(this._path_cmds)),this},this.remove=function(t){return t<-this._path_cmds.length?this:t>=this._path_cmds.length?this:(0>t&&(t=this._path_cmds.length+t),Array.prototype.splice.call(this._path_cmds,t,1),this.attr("d",i(this._path_cmds)),this)},this.point=function(t){return t<-this._path_cmds.length?this:t>=this._path_cmds.length?this:(0>t&&(t=this._path_cmds.length+t),s(this._path_cmds[t]),this._path_cmds[t])},this.save=function(){return this.attr("d",i(this._path_cmds))},this}function s(t){function r(r){return 0>r?t.values.length+r:r}function n(n){return function(e){return void 0===e?t.values[r(n)]:(t.values[r(n)]=e,t)}}function e(n){return function(e,i){return void 0===e?{x:t.values[r(n[0])],y:t.values[r(n[1])]}:(t.values[r(n[0])]=e,t.values[r(n[1])]=i,t)}}function i(r){return function(n){return void 0===n?!!t.values[r]:(t.values[r]=n?1:0,t)}}var o={x:0,y:1,c1:[0,1],c2:[2,3],end:[-2,-1]},s=t.name.toLowerCase();"v"===s?o.y=0:"h"===s?o.x=0:"a"===s&&(o.x=-2,o.y=-1),t.c1=e(o.c1),t.c2=e(o.c2),t.end=e(o.end),t.x=n(o.x),t.y=n(o.y),"a"===s&&(t.rx=n(0),t.ry=n(1),t.rotation=n(2),t.largeArc=i(3),t.clockwise=i(4))}t.prototype.path=n,n.asPath=o}),t.extend(function(t,r,n){function e(r,n,e,o,s){var a=new t("use",this.dom);return void 0!==r&&("#"!==r.charAt(0)&&(r="#"+r),a.attr("xlink:href",r,t.prototype.xlink_ns),void 0!==n&&a.attr("x",n),void 0!==e&&a.attr("y",e),void 0!==o&&a.attr("width",o),void 0!==s&&a.attr("height",s)),i.call(a)}function i(){var t=[{desired:"x",isNum:!0},{desired:"y",isNum:!0},{desired:"width",isNum:!0},{desired:"height",isNum:!0}];return this.attr.DirectAccess(this,t),n.common.asXlinkable.call(this),this}t.prototype.use=e,e.asUse=i}),t.extend(function(t){function r(r,e,i,o,s){var a=new t("image",this.dom);return void 0!==r&&a.attr("xlink:href",r,t.prototype.xlink_ns),void 0!==e&&a.attr("x",e),void 0!==i&&a.attr("x",i),void 0!==o&&a.attr("width",o),void 0!==s&&a.attr("height",s),n.call(a)}function n(){var r=[{desired:"x",isNum:!0},{desired:"y",isNum:!0},{desired:"width",isNum:!0},{desired:"height",isNum:!0}];return this.attr.DirectAccess(this,r),this.href=function(r){return void 0===r?this.attr("xlink:href"):void this.attr("xlink:href",r,t.prototype.xlink_ns)},this.preserveAspectRatio=function(t,r,n){return r=void 0===r?"":r,n(n===udnefined)?"":n,this.attr("preserveAspectRatio",r+" "+t+" "+n),this},this}t.prototype.image=r,r.asImage=n}),t.extend(function(t,r){function n(r,n,e){var i=new t("text",this.dom);return void 0!==n&&void 0!==e&&i.attr({x:n,y:e}),void 0===r&&(r=""),i._text_textNode=t.prototype.createTextNode(r),i.dom.appendChild(i._text_textNode),s.call(i)}function e(r,n){if(void 0===n&&(n=""),r.dom.contains(r._text_textNode))r._text_textNode.nodeValue=n;else{for(var e=r.dom.childNodes,i=e.length,o=!1,s=0;i>s;++s)if("#text"===e[s].nodeName){r._text_textNode=e[s],o=!0;break}o===!1&&(r._text_textNode=t.prototype.createTextNode(n)),r.dom.appendChild(r._text_textNode)}}function i(t,r){if(t.hasChildNodes()===!1)return"#text"===t.nodeName?t.nodeValue:"";for(var n="",e=t.childNodes,o=e.length,s=0;o>s;++s)r?n+=i(e[s],r):"#text"===e[s].nodeName&&(n+=e[s].nodeValue);return n}function o(t,r){return r?i(t.dom,!0):t.dom.contains(t._text_textNode)?t._text_textNode.nodeValue:""}function s(){this.text=function(t){return void 0===t||r.is(t,"boolean")?o(this,t):(e(this,t),this)},this.x=function(t){return r.toNum(this.attr("x",t))},this.y=function(t){return r.toNum(this.attr("y",t))};var t=[{desired:"anchor",real:"text-anchor"},{desired:"decoration",real:"text-decoration"},{desired:"rendering",real:"text-rendering",isNum:!0},{desired:"textLength",real:"textLength",isNum:!0},{desired:"lengthAdjust",real:"lengthAdjust"},{desired:"kerning",real:"kerning",isNum:!0},{desired:"letter_spacing",real:"letter-spacing",isNum:!0},{desired:"word_spacing",real:"word-spacing",isNum:!0},{desired:"writing_mode",real:"writing-mode"},{desired:"glyph_orientation_vertical",real:"glyph-orientation-vertical",isNum:!0},{desired:"direction",real:"direction"}];return this.attr.DirectAccess(this,t),this}t.prototype.text=n,n.asText=s}),t.extend(function(t,r,n){function e(r,n,e){var o=new t("tspan",this.dom);return i.call(o),void 0!==r&&o.text(r),void 0!==n&&o.dx(n),void 0!==n&&o.dy(e),o}function i(){return c.call(this),this}function o(r,n,e){var i=new t("tref",this.dom);return s.call(i),void 0!==r&&i.href(r),void 0!==n&&i.dx(n),void 0!==e&&i.dy(e),i}function s(){return c.call(this),n.common.asXlinkable.call(this),this}function a(r,n){var e=new t("textPath",this.dom);return u.call(e),e.href(r),void 0!==n&&e.text(n),e}function u(){return c.call(this),n.common.asXlinkable.call(this),this}function c(){t.prototype.text.asText.call(this);
for(var n=["dx","dy"],e=0;e<n.length;++e)this[n[e]]=function(t,n){return function(e){if(void 0===e){var i=t.attr(n);return i=i.split(r.regex.split_seperator).map(function(t){return r.toNum(t)})}return r.is(e,"array")?t.attr(n,e.join(" ")):(r.is(e,"string")||r.is(e,"number"))&&t.attr(n,e),t}}(this,n[e]);return function(t){t.baseline=function(){},t.baseline.shift=function(r){return t.attr("baseline-shift",r)},t.baseline.alignment=function(r){return t.attr("alignment-baseline",r)},t.baseline.dominant=function(r){return t.attr("dominant-baseline",r)}}(this),this}t.prototype.tspan=e,t.prototype.tref=o,t.prototype.textPath=a,e.asTspan=i,o.asTref=s,a.asTextPath=u}),t});