!function(t,r){"function"==typeof define&&define.amd?define(r):"object"==typeof exports?exports.svg=r():t.svg=r()}(this,function(){var t=function(){function t(){}return t.util={},t.svgElem={},t.version="0.0.0",t.modules={},t.module=function(r){r(t)},t.extend=function(r){r(t.svgElem,t.util,t.modules)},t.plugin=function(r,e){var n=t.svgElem,i=Object.prototype.hasOwnProperty,o=r(t.svgElem,t.util,t.modules);i.call(o,"name")!==!1&&i.call(o,"constructor")!==!1&&(void 0===e&&(e=!1),(t.plugin.has[o.name]!==!0||e!==!1)&&(t.plugin.has[o.name]=o.contructor,Object.defineProperty(n.prototype,o.name,{get:function(){var t=new o.constructor(this);return Object.defineProperty(this,o.name,{value:t,writable:!0,configurable:!0,enumerable:!0}),t},set:function(){},configurable:!0,enumerable:!0})))},t.plugin.has={},t}();return t.module(function(t){function r(){}function e(t){return null===t?null:i(t)===!1?t+"%":t}function n(t){return null===t?null:r.toNum(i(t)?t.slice(0,-1):t)}function i(t){return r.is(t,"string")===!1?!1:"%"===t.charAt(-1)}t.util=r,r.regex={split_seperator:/[, ]/,pathCommand:/([a-z])[,\s]*((-?\d+\.?\d*(?:e[+-]?\d+)?\s*,?\s*)*)/gi,transformCommand:/([a-zXY]*)\s*\(\s*((-?\d+\.?\d*(?:e[+-]?\d+)?\s*,?\s*)*)\)/gi,semiColonValues:/(-?\d+\.?\d*(?:e[+-]?\d+)?)\s*;\s*/gi,values:/(-?\d+\.?\d*(?:e[+-]?\d+)?)\s*,?\s*/gi,number:/(-?\d+\.?\d*(?:e[+-]?\d+)?)/},r.is=function(t,r){if(void 0===t||null===t)return!1;var e=Object.prototype.toString.call(t).toLowerCase(),n="[object ",i=e.substring(n.length,n.length+r.length);return i===r},r.isUpperCase=function(t){return t.toUpperCase()===t},r.toNum=function(t){if(null===t)return null;var r=+t;return isNaN(+t)?t:r},r.toRad=function(t){return t*Math.PI/180},r.toDeg=function(t){return 180*t/Math.PI},r.mixin=function(t,r,e){e=void 0===e?!1:e;for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e||!Object.prototype.hasOwnProperty.call(t,n))&&(t[n]=r[n]);return t},r.mixinUsingFunc=function(t,r,e){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=e(t,r,n));return t},r.mixinFromExports=function(t,r,e,n){if(!e||"[object Array]"!=Object.prototype.toString.call(e)){n=void 0===n?!1:n;var i,o,s=e.length;for(i=0;s>i;++i)o=e[i],Object.prototype.hasOwnProperty.call(r,o)&&(n||!Object.prototype.hasOwnProperty.call(t,o))&&(t[o]=r[o]);return t}},r.arrayOrString=function(t){var e=t,n="";return r.is(t,"array")?(e=t,n=e.join(" ")):r.is(t,"string")&&(n=e,e=n.split(r.regex.split_seperator).map(function(t){return r.toNum(t)})),{points:e,points_string:n}},r.clone=function(t){function e(t,r,e){var n,i,o={};for(n in r)i=r[n],(!1==n in t||t[n]!==i&&(n in o==0||o[n]!==i))&&(t[n]=e?e(i):i);return t}if(!t||"object"!=typeof t||r.is(t,"function"))return t;if(t.nodeType&&"cloneNode"in t)return t.cloneNode(!0);if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);var n;if(r.is(t,"array")){n=[],(void 0===t||null===t)&&console.log("what is going on here");for(var i=t.length,o=0;i>o;++o)n.push(r.clone(t[o]))}else n=t.constructor?new t.constructor:{};return e(n,t,r.clone)},r.convertToPercentString=e,r.convertFromPercentString=n,r.isPercentString=i}),t.module(function(t){function r(t,n){t&&"[object String]"===Object.prototype.toString.call(t)?this.dom=e.document.createElementNS(r.prototype.svg_ns,t):void 0!==t&&null!==t&&(this.dom=t),n&&n.appendChild(this.dom)}t.svgElem=r;var e={window:window,document:window.document};r.prototype.svg_ns="http://www.w3.org/2000/svg",r.prototype.xlink_ns="http://www.w3.org/1999/xlink",r.prototype.xml_ns="http://www.w3.org/2000/xmlns/",r.prototype.clear=function(){for(;this.dom.firstChild;)this.dom.removeChild(this.dom.firstChild);return this},r.prototype.remove=function(){this.clear(),this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom)},r.prototype.reRunMixin=function(){function t(t){return t.charAt(0).toUpperCase()+t.slice(1)}var e=this.dom.tagName;"switch"===e&&(e="switchElem");var n=r.prototype[e],i=n["as"+t(n.name)];i&&"[object Function]"===Object.prototype.toString.call(i)&&(i=[i]),(void 0===i||null===i)&&console.log("not very good thing to do here");for(var o=0;o<i.length;++o)i[o].call(this);return this},r.prototype.clone=function(){var r=t.util.clone(this);for(var e in r)void 0!==t.plugin.has[e]&&Object.prototype.hasOwnProperty.call(r,e)&&delete r[e];return r.reRunMixin(),this.dom.parentNode&&this.dom.parentNode.appendChild(r.dom),r},r.prototype.createTextNode=function(t){return e.document.createTextNode(t)},r.prototype.url=function(t){return void 0===t?null:"url("+t+")"}}),t.module(function(t){function r(){}t.modules.common=r;var e=t.util,n=t.svgElem;r.asViewport=function(){return this.viewBox=function(t,r,e,n){if(void 0===t){var i=this.attr("viewBox");return null===i?null:(i=i.split(" "),{x:parseFloat(i[0]),y:parseFloat(i[1]),w:parseFloat(i[2]),h:parseFloat(i[3])})}this.attr("viewBox",[t,r,e,n].join(" "))},this.preserveAspectRatio=function(t,r,e){return r=void 0===r?"":r,e(e===udnefined)?"":e,this.attr("preserveAspectRatio",r+" "+t+" "+e),this},this.zoom=function(){return console.warn("zoom not implemented"),this},this},r.asXlinkable=function(){return this.href=function(t){return void 0===t?this.attr("xlink:href"):("#"!==t.charAt(0)&&(t="#"+t),this.attr("xlink:href",t,n.prototype.xlink_ns),this)},this},r.makePointProperty=function(t,r,e){return function(n,i){if(void 0===n){n=this.attr(t),i=this.attr(r),void 0!==e&&(n=e(n,!0),i=e(n,!0));var o={};return o[t]=n,o[r]=i,o}return void 0!==e&&(n=e(n,!1),i=e(i,!1)),this.attr(t,n),this.attr(r,i),this}},r.applyAnimationProps=function(){function t(t,r){if(null===t)return null;var n;return r?(n=[],t.replace(e.regex.semiColonValues,function(t,r){r&&n.push(e.toNum(r))}),n):e.is(t,"array")?t.join(";"):t}function r(t,r){if(null===t)return null;if(r){var n=t.split(e.regex.split_seperator).map(function(t){return e.toNum(t)});return n}return e.is(t,"array")?t.join(" "):t}var n=[{desired:"attributeType"},{desired:"attributeName"},{desired:"begin"},{desired:"end"},{desired:"dur"},{desired:"min"},{desired:"max"},{desired:"restart"},{desired:"repeatCount"},{desired:"repeatDur"},{desired:"fill"},{desired:"calcMode"},{desired:"values",munger:t},{desired:"keyTimes",munger:t},{desired:"keySplines",munger:r},{desired:"from",isNum:!0,munger:r},{desired:"to",isNum:!0,munger:r},{desired:"by"},{desired:"autoReverse"},{desired:"accelerate"},{desired:"decelerate"},{desired:"additive"},{desired:"accumulate"}];this.attr.DirectAccess(this,n)}}),t.extend(function(t,r){function e(){}function n(t){return 0>t?0:t>255?255:t}t.prototype.colorUtil=new e,e.prototype.rgb2hex=function(t,r,e){var i=["#",0,0,0];return i[1]=Number.prototype.toString.call(n(t),16),i[2]=Number.prototype.toString.call(n(r),16),i[3]=Number.prototype.toString.call(n(e),16),Array.prototype.join.call(i,"")},e.prototype.hex2rgb=function(t){return t="#"===t.charAt(0)?t.substring(1,7):t,{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16)}},e.prototype.asHex=function(t,n,i){if(void 0===t)return null;if(r.is(t,"string"))return"#"!==a.charAt(0)&&(t="#"+t),t;if(void 0!==n&&void 0!==i)return e.prototype.rgb2hex(t,n,i)}}),t.extend(function(t,r){function e(t,r,e,n){return void 0!==r&&void 0!==e?(void 0===n||null===n?t.setAttribute(r,e):t.setAttributeNS(n,r,e),this):void 0}function n(t,r,e){return void 0!==r?(void 0===e||null===e?t.removeAttribute(r):t.removeAttributeNS(e,r),this):void 0}function i(t,r,e){return o(this,this.dom,t,r,e)}function o(t,i,o,s,a){if(void 0===o)return function(t,r){for(var e,n,i=[],o=r.attributes.length,s=0;o>s;++s)e=r.attributes[s].name,n=r.attributes[s].value,i.push([e,n]);return i}(t,i);if(r.is(o,"object")){a=void 0!==s?s:null;for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&e(i,u,o[u],a);return t}if(r.is(o,"string")){if(void 0===s){var c=i.attributes[o];return null!==c&&void 0!==c?c.value:null}return void 0===a&&(a=null),null===s?n(i,o,a):e(i,o,s,a),t}if(r.is(o,"array")){void 0===a&&(a=null);var l=o.length,d=0;if(r.is(s,"boolean")&&s===!0){for(d=0;l>d;++d)n(i,o[d],a);return t}var c={};for(d=0;l>d;++d){var h=i.attributes[o[d]];void 0!==h&&null!==h&&null!==h.value&&(c[o[d]]=h.value)}return c}}t.prototype.attr=i,i.attrInternal=o,i._defineProperty=function(t,r,e,n){return Object.defineProperty(t,r,{get:e,set:n,configurable:!0,enumerable:!0}),t},i.DirectAccessNoFunction=function(t,e,n){if(void 0===n&&(n=t),r.is(t,"array")===!0)return console.error("context must be an object"),null;for(var o=e.length,s=0;o>s;++s){{e[s]}!function(e,o,s,a){void 0===o&&(o=e),void 0===s&&(s=!1),void 0===a&&(a=function(t){return t}),i._defineProperty(t,e,function(){a(n.attr(o),!0);return s?r.toNum(n.attr(o)):n.attr(o)},function(t){var r=a(t,!1);return null===r?n.attr_rm(o):n.attr(o,r),n})}(e[s].desired,e[s].real,e[s].isNum,e[s].munger)}},i.DirectAccess=function(t,e,n){if(void 0===n&&(n=t),r.is(t,"array")===!0)return console.error("context must be an object"),null;for(var i=e.length,o=0;i>o;++o){var s=e[o];t[s.desired]=function(t,e,i,o){return void 0===i&&(i=!1),void 0===e&&(e=t),void 0===o&&(o=function(t){return t}),function(t){var s=null;return void 0===t?(s=o(n.attr(e),!0),i?r.toNum(s):s):(s=o(t,!1),n.attr(e,s),n)}}(s.desired,s.real,s.isNum,s.munger)}}}),t.plugin(function(t,r){function e(t){function e(t){return null!==t.attr("cx")}function n(t){return null!==t.attr("rx")}if(void 0===t||null===t)return this;var i=[{desired:"x",isNum:!0},{desired:"y",isNum:!0},{desired:"width",isNum:!0},{desired:"height",isNum:!0},{desired:"rx",isNum:!0},{desired:"ry",isNum:!0},{desired:"r",isNum:!0},{desired:"cx",isNum:!0},{desired:"cy",isNum:!0}];return t.attr.DirectAccessNoFunction(this,i,t),this.pos=function(n,i){return e(t)?void 0===n?{cx:r.toNum(t.attr("cx")),cy:r.toNum(t.attr("cy"))}:(t.attr({cx:n,cy:i}),t):void 0===n?{x:r.toNum(t.attr("x")),y:r.toNum(t.attr("y"))}:(t.attr({x:n,y:i}),t)},this.size=function(i,o){return n(t)?void 0===i?{rx:r.toNum(t.attr("rx")),ry:r.toNum(t.attr("ry"))}:(t.attr({rx:i,ry:o}),t):e(t)?void 0===i?{r:r.toNum(t.attr("r"))}:(t.attr({r:i}),t):void 0===i?{width:r.toNum(t.attr("width")),height:r.toNum(t.attr("height"))}:(t.attr({width:i,height:o}),t)},this.move=function(n,i){if(void 0===n)return null;if(null!==t.attr("points"));else if(null!==t.attr("x1")){var o=t.attr(["x1","y1","x2","y2"]);return o.x1=r.toNum(o.x1)+n,o.y1=r.toNum(o.y1)+i,o.x2=r.toNum(o.x2)+n,o.y2=r.toNum(o.y2)+i,t.attr(o),t}var o=this.pos();return t.attr(e(t)?{cx:n+o.cx,cy:i+o.cy}:{x:n+o.x,y:i+o.y}),t},this}return{name:"shape",constructor:function(t){return e.call(this,t),this}}}),t.plugin(function(t,r){function e(t){var e={translate:2,rotate:[1,3],scale:2,skewX:1,skewY:1,matrix:6},n=[];return t.replace(r.regex.transformCommand,function(t,i,o){if(void 0!==e[i]){var s={name:i,values:[]};if(o.replace(r.regex.values,function(t,e){e&&s.values.push(r.toNum(e))}),r.is(e[i],"array")){for(var a=e[i].length,u=!1,c=0;a>c;++c)if(s.values.length===e[i][c]){u=!0;break}if(u===!1)return}else if(s.values.length<e[i])return;n.push(s)}}),n}function n(t){return t.name+"("+t.values.join(",")+")"}function i(t,r){return void 0===r?t._transform_values:r<-t._transform_values.length?null:r>=t._transform_values.length?null:(0>r&&(r=t._transform_values.length+r),u(t._transform_values[r]))}function o(t,r){if(void 0===r||null===r)return t;var n=e(r);return t._transform_values=n,t.attr(t._transform_name,r),t}function s(t){for(var r="",e=t._transform_values.length,i=0;e>i;++i)r+=n(t._transform_values[i]),i!==e-1&&(r+=" ");return t.attr(t._transform_name,r),t}function a(t){return void 0===t||null===t?this:(this.clear=function(){for(;t._transform_values.length>0;)t._transform_values.pop();t.attr(t._transform_name,"")},this.save=function(){return s(t)},this.translate=function(r,e){return t._transform_values.push({name:"translate",values:[r,e]}),s(t),t},this.rotate=function(r,e,n){var i=[];return void 0!==e&&i.push(e),void 0!==n&&i.push(n),i.push(r),t._transform_values.push({name:"rotate",values:i}),s(t),t},this.scale=function(r,e){return void 0!==r&&void 0===e&&(e=r),t._transform_values.push({name:"scale",values:[r,e]}),s(t),t},this.skew=function(r,e){return t._transform_values.push({name:"skewX",values:[r]}),t._transform_values.push({name:"skewY",values:[e]}),s(t),t},this.matrix=function(e){return r.is(e,"string")&&(e=e.split(r.regex.split_seperate,function(t){return r.toNum(t)})),r.is(e,"array")&&6===e.length&&(e=r.clone(e)),6!=e.length?t:(t._transform_values.push({name:"matrix",values:e}),s(t),t)},this.matrix.identity=function(){return[1,0,0,1,0,0]},this.fromStringToObject=e,void(this.updateFromDom=function(){var r=t.attr(t._transform_name);if(void 0===r||null===r)return[];var n=e(r);return t._transform_values=n,n}))}function u(t){return t}return{name:"transform",constructor:function(t){var e=function(e){return void 0===e?i(t):r.is(e,"string")?(o(t,e),t):r.is(e,"number")?i(t,e):void 0};return void 0!==t&&null!==t&&(t._transform_values=[],t._transform_name="linearGradient"===t.dom.nodeName||"radialGradient"===t.dom.nodeName?"gradientTransform":"pattern"===t.dom.nodeName?"patternTransform":"transform"),a.call(e,t),e}}}),t.plugin(function(t,r){function e(t){var r=function(r){return t.attr("style",r)};return n.call(r,t),r}function n(t){function e(t){return 0>t&&(t=0),t>1&&(t=1),t}function n(t,n){if(void 0===n){var n=this.attr(t);return null!=n?r.toNum(n):null}return n=e(r.toNum(n)),this.attr(t,n),this}function i(t,e){var n;return void 0===e?(n=this.attr(t),null===n?null:n=n.split(" ").map(function(t){return r.toNum(t)})):(n=r.is(e,"array")?e.join(" "):e,this.attr(t,n),this)}function o(r){return t.attr("stroke",r)}function s(r){return t.attr("fill",r)}function a(){}return void 0===t||null===t?this:(this.stroke=o,o.url=function(r){return void 0===r?null:t.attr("stroke","url("+r+")")},o.width=function(e){return r.toNum(t.attr("stroke-width",e))},o.opacity=function(r){return n.call(t,"stroke-opacity",r)},o.dasharray=function(r){return i.call(t,"stroke-dasharray",r)},o.dashoffset=function(e){return r.toNum(t.attr("stroke-dashoffset",e))},o.linecap=function(r){return t.attr("stroke-linecap",r)},o.linejoin=function(r){return t.attr("stroke-linejoin",r)},o.miterlimit=function(e){return 1>e&&(e=1),r.toNum(t.attr("miterlimit",e))},this.fill=s,s.url=function(r){return void 0===r?null:t.attr("fill","url("+r+")")},s.opacity=function(r){return n.call(t,"fill-opacity",r)},s.rule=function(r){return t.attr("fill-rule",r)},this.marker=a,a.start=function(){},a.mid=function(){},void(a.end=function(){}))}return{name:"style",constructor:e}}),t.plugin(function(t){function r(r){return void 0===r||null===r?this:(this.parse=function(r){function e(t){return t.charAt(0).toUpperCase()+t.slice(1)}if(void 0===r)return null;var n=r.tagName.toLowerCase();"switch"===n&&(n="switchElem");var i=new t(r),o=t.prototype[n];return o["as"+e(o.name)].call(i),i},this)}return{name:"lex",constructor:function(t){return r.call(this,t),this}}}),t.plugin(function(){function t(t){if(void 0===t||null===t)return this;var r=[{desired:"family",real:"font-family"},{desired:"size",real:"font-size"},{desired:"size_adjust",real:"font-size-adjust"},{desired:"stretch",real:"font-stretch"},{desired:"style",real:"font-style"},{desired:"variant",real:"font-variant"},{desired:"weight",real:"font-weight"}];return t.attr.DirectAccessNoFunction(this,r,t),this}return{name:"font",constructor:function(r){return t.call(this,r),this}}}),t.plugin(function(){function t(t){return r.call(this,t),this}function r(t){function r(t,r,e){if(void 0===e){var n=t.attr(r);return void 0===n||null==n?"":n.slice(5,-1)}return"#"!==e.charAt(0)&&(e="#"+e),t.attr(r,"url("+e+")"),t}return this.start=function(e){return r(t,"marker-start",e)},this.mid=function(e){return r(t,"marker-mid",e)},this.end=function(e){return r(t,"marker-end",e)},t}return{name:"mark",constructor:t}}),t.extend(function(t,r,e){function n(){return this.pos=function(t,r){if(void 0===t){var e=this.attr.y;if(null!==e)return{x:e[0],y:e[1]}}else this.attr({x:t,y:r})},e.common.asViewport.call(this),this}t.prototype.svg=function(r,e,i,o){var s=new t("svg",this.dom);return s.attr({x:r,y:e,width:i,height:o}),n.call(s),s},t.prototype.svg.asSvg=n}),t.module(function(t){function r(t,r,n){var i=document.getElementById(t);if(null===i)return console.error("Invalid parent container id"),null;void 0===r&&(r=i.clientWidth),void 0===n&&(n=i.clientHeight);var o=new e("svg",i);return o.attr({x:0,y:0,width:r,height:n}),e.prototype.svg.asSvg.call(o),o.dom.setAttribute("xmlns",e.prototype.svg_ns),o.dom.setAttributeNS(e.prototype.xml_ns,"xmlns:xlink",e.prototype.xlink_ns),o.attr({version:"1.1",baseProfile:"full"}),o}t.svgRoot=r;var e=t.svgElem;e.prototype.svgRoot=r,r.asSvgRoot=e.prototype.svg.asSvg}),t.extend(function(t){function r(){var r=new t("g",this.dom);return e.call(r)}function e(){return this}t.prototype.g=r,r.asG=e}),t.extend(function(t){function r(r){var n=new t("defs",this.dom);return n._defs_id=void 0===r?"defs_"+Date.now().toString()+"_":r,n._defs_start_id=0,n._defs_cache={},e.call(n)}function e(){return this.store=function(t,r,e){(e||void 0===this._defs_cache[t])&&(this._defs_cache[t]=r)},this.get=function(t){return this._defs_cache[t]},this.drop=function(t){delete this._defs_cache[t]},this.dropAll=function(){this._defs_cache={}},this.url=function(){return this._defs_start_id+=1,this._defs_id+this._defs_start_id.toString()},this}t.prototype.defs=r,r.asDefs=e}),t.extend(function(t,r,e){function n(r){var e=new t("symbol",this.dom);return void 0!==r&&e.attr("id",r),i.call(e)}function i(){return this.id=function(t){return this.attr("id",t)},e.common.asViewport.call(this),this}t.prototype.symbol=n,n.asSymbol=i}),t.extend(function(t){function r(){new t("switch",this.dom);return e.call(this)}function e(){return this}t.prototype.switchElem=r,r.asSwitchElem=e}),t.extend(function(t){function r(r){var n=new t("a",this.dom);return e.call(n),n.href(r),n}function e(){return this.href=function(r){return void 0===r?this.attr("xlink:href"):(this.attr("xlink:href",r,t.prototype.xlink_ns),this)},this.show=function(r){return void 0===r?this.attr("xlink:show"):(this.attr("xlink:href",r,t.prototype.xlink_ns),this)},this.target=function(t){return this.attr("target",t)},this}t.prototype.a=r,r.asA=e}),t.extend(function(t,r,e){function n(r,e,n){var o=new t("marker",this.dom);return o.attr({id:r,markerWidth:e,markerHeight:n}),i.call(o),o}function i(){var t=[{desired:"id"},{desired:"x",real:"refX",isNum:!0},{desired:"y",real:"refY",isNum:!0},{desired:"width",real:"markerWidth",isNum:!0},{desired:"height",real:"markerHeight",isNum:!0},{desired:"units",real:"markerUnits"},{desired:"orient",isNum:!0}];return this.attr.DirectAccess(this,t),this.useUserSpace=function(t){if(void 0===t){var r=this.attr("markerUnits");return null!==r&&void 0!==r?"userSpaceOnUse"===r:!1}return t&&this.attr("markerUnits","userSpaceOnUse"),this},this.ref=function(t,e){return void 0===t?{x:r.toNum(this.attr("refX")),y:r.toNum(this.attr("refY"))}:(this.attr({refX:t,refY:e}),this)},e.common.asViewport.call(this),this}t.prototype.marker=n,n.asMarker=i}),t.extend(function(t,r,e){function n(e,n,i,s,a){var u=new t("linearGradient",this.dom);return o.call(u),u.attr({id:e,x1:r.convertToPercentString(n),y1:r.convertToPercentString(i),x2:r.convertToPercentString(s),y2:r.convertToPercentString(a)}),u._stops_array=[],u}function i(){function e(t){for(var r=[],e=t.childNodes,n=e.length,i=0;n>i;++i)"stop"===e[i].nodeName&&r.push(e[i]);return r}function n(r){var e=t.prototype.attr.attrInternal,n=[],i=0,o=r.length;for(i=0;o>i;++i)n.push({offset:e(r[i],"offset"),"stop-color":e(r[i],"stop-color"),"stop-opacity":e(r[i],"stop-opacity")});return n}function i(n,i){for(var o=t.prototype.attr.attrInternal,s=e(n.dom);s.length<i.length;){var a=n.stop(0,0,0);s.push(a.dom)}for(var u=0,c=s.length,l=0;c>l;++l)o(n,s[l],{offset:r.convertToPercentString(i[l].offset),"stop-color":i[l].color,"stop-opacity":i[l].opacity}),u+=1;if(u<s.length){var d=s[u],h=u;c=s.length;for(var h=u;h<s.length;++h)d.removeChild(s[h])}return n}var o=[{desired:"id"},{desired:"spreadMethod"},{desired:"units",real:"gradientUnits"},{desired:"gradientUnits"}];return this.attr.DirectAccess(this,o),this.stops=function(t){if(void 0===t)return this._stops_array;if(r.is(t,"number")){var e=t;return e<-this._stops_array.length?this:e>=this._stops_array.length?this:(0>e&&(e=this._stops_array.length+e),this._stops_array[e])}var n=t.length;this._stops_array=[];for(var o=0;n>o;++o)this._stops_array.push({offset:t[o][0],color:t[o][1],opacity:t[o][2]});return i(this,this._stops_array),this},this.save=function(){return i(this,this._stops_array),this},this.updateFromDom=function(){var t=e(this.dom);this._stops_array=n(t)},this}function o(){i.call(this),e.common.asXlinkable.call(this);var t=[{desired:"x1",isNum:!0,munger:u},{desired:"y1",isNum:!0,munger:u},{desired:"x2",isNum:!0,munger:u},{desired:"y2",isNum:!0,munger:u}];return this.attr.DirectAccess(this,t),this.start=function(t,e){return void 0===t?(t=r.convertFromPercentString(this.attr("x1")),e=r.convertFromPercentString(this.attr("y1")),{x:r.toNum(t),y:r.toNum(e)}):(this.attr({x1:r.convertToPercentString(t),y1:r.convertToPercentString(e)}),this)},this.end=function(t,e){return void 0===t?(t=r.convertFromPercentString(this.attr("x2")),e=r.convertFromPercentString(this.attr("y2")),{x:r.toNum(t),y:r.toNum(e)}):(this.attr({x2:r.convertToPercentString(t),y2:r.convertToPercentString(e)}),this)},this}function s(e,n,i,o){var s=new t("radialGradient",this.dom);return a.call(s),s.attr({id:e,fx:r.convertToPercentString(n),fy:r.convertToPercentString(i),r:r.convertToPercentString(o)}),s}function a(){i.call(this),e.common.asXlinkable.call(this);var t=[{desired:"cx",isNum:!0,munger:u},{desired:"cy",isNum:!0,munger:u},{desired:"fx",isNum:!0,munger:u},{desired:"fy",isNum:!0,munger:u},{desired:"r",isNum:!0,munger:u}];return this.attr.DirectAccess(this,t),this.center=e.common.makePointProperty("cx","cy",u),this.focal=e.common.makePointProperty("fx","fy",u),this}function u(t,e){return e?r.convertFromPercentString(t):r.convertToPercentString(t)}t.prototype.linearGradient=n,n.asLinearGradient=o,t.prototype.radialGradient=s,s.asRadialGradient=a}),t.extend(function(t,r){function e(e,n){var o=new t("stop",this.dom);return o.attr({offset:r.convertToPercentString(e),"stop-color":n,"stop-opacity":1}),i.call(o),o}function n(t,e){return e?r.convertFromPercentString(t):r.convertToPercentString(t)}function i(){var t=[{desired:"offset",isNum:!0,munger:n},{desired:"color",real:"stop-color"},{desired:"opacity",real:"stop-opacity",isNum:!0}];this.attr.DirectAccess(this,t)}t.prototype.stop=e,e.asStop=i}),t.extend(function(t,r,e){function n(r,e,n,o,s){var a=new t("pattern",this.dom);return a.attr({id:r,x:e,y:n,width:o,height:s,patternUnits:"userSpaceOnUse"}),i.call(a),a}function i(){var t=[{desired:"id"},{desired:"units",real:"patternUnits"},{desired:"contentUnits",real:"patternContentUnits"},{desired:"x",isNum:!0},{desired:"y",isNum:!0},{desired:"width",isNum:!0},{desired:"height",isNum:!0}];return this.attr.DirectAccess(this,t),e.common.asViewport.call(this),e.common.asXlinkable.call(this),this}t.prototype.pattern=n,n.asPattern=i}),t.extend(function(t){function r(r){var n=new t("clipPath",this.dom);return n.attr("id",r),e.call(n),n}function e(){var t=[{desired:"id"},{desired:"units",real:"clipPathUnits"}];return this.attr.DirectAccess(this,t),this}function n(t){return void 0===t?this.attr("clip-path"):(this.attr("clip-path",t),this)}t.prototype.clipPath=r,r.asClipPath=e,t.prototype.clip_path=n}),t.extend(function(t){function r(r,n,i,o,s){var a=new t("mask",this.dom);return e.call(a),a.attr({id:r,x:n,y:i,width:o,height:s}),a}function e(){var t=[{desired:"id"},{desired:"x",isNum:!0},{desired:"y",isNum:!0},{desired:"width",isNum:!0},{desired:"height",isNum:!0},{desired:"units",real:"maskUnits",isNum:!0},{desired:"contentUnits",real:"maskContentUnits",isNum:!0}];return this.attr.DirectAccess(this,t),this}function n(t){return void 0===t?this.attr("mask"):(this.attr("mask","url("+t+")"),this)}t.prototype.mask=r,r.asMask=e,t.prototype.use_mask=n}),t.extend(function(t,r,e){function n(r){var e=new t("set",this.dom);return i.call(e),e.attr({attributeName:r}),e}function i(){return e.common.applyAnimationProps.call(this),this}t.prototype.set=n,n.asSet=i}),t.extend(function(t,r,e){function n(r){var e=new t("animateMotion",this.dom);return i.call(e),"#"===r.charAt(0)?e.mpath(r):e.attr("path",r),e}function i(){e.common.applyAnimationProps.call(this);var r=[{desired:"rotate"},{desired:"path"}];return this.attr.DirectAccess(this,r),this.mpath=function(r){var e=null;if(this.dom.hasChildNodes())for(var n=this.dom.childNodes,i=0;i<n.length;++i)if("mpath"===n[i].nodeName){e=n[i];break}return void 0===r?null===e?null:this.attr.attrInternal(this,e,"xlink:href"):(null===e&&(e=new t("mpath",this.dom),e=e.dom),void this.attr.attrInternal(this,e,"xlink:href",r,this.xlink_ns))},this}t.prototype.animateMotion=n,n.asAnimateMotion=i}),t.extend(function(t,r,e){function n(r){var e=new t("animateTransform",this.dom);i.call(e);var n="transform";return"linearGradient"===this.dom.nodeName||"radialGradient"===this.dom.nodeName?n="gradientTransform":"pattern"===this.dom.nodeName&&(n="patternTransform"),e.attr({attributeName:n,type:r}),e}function i(){e.common.applyAnimationProps.call(this);var t=[{desired:"rotate"},{desired:"type"}];return this.attr.DirectAccess(this,t),this}t.prototype.animateTransform=n,n.asAnimateTransform=i}),t.extend(function(t,r,e){function n(r){var e=new t("animate",this.dom);return i.call(e),e.attr({attributeName:r}),e}function i(){return e.common.applyAnimationProps.call(this),this}t.prototype.animate=n,n.asAnimate=i}),t.extend(function(t,r){function e(r,e,i,o){var s=new t("rect",this.dom);return s.attr({x:r,y:e,width:i,height:o}),n.call(s)}function n(){return this.round=function(t,e){return void 0===t?{rx:r.toNum(this.attr("rx")),ry:r.toNum(this.attr("ry"))}:(this.attr({rx:t,ry:e}),this)},this}t.prototype.rect=e,e.asRect=n}),t.extend(function(t,r){function e(r,e,i){var o=new t("circle",this.dom);return o.attr({cx:r,cy:e,r:i}),n.call(o),o}function n(){return this.radius=function(t){return void 0===t?r.toNum(this.attr("r",t)):void this.attr("r",t)},this.center=function(t,e){return void 0===t?{cx:r.toNum(this.attr("cx")),cy:r.toNum(this.attr("cy"))}:(this.attr({cx:t,cy:e}),this)},this}t.prototype.circle=e,e.asCircle=n}),t.extend(function(t,r){function e(r,e,i,o){var s=new t("ellipse",this.dom);return s.attr({cx:r,cy:e,rx:i,ry:o}),n.call(s)}function n(){var t=[{desired:"rx",isNum:!0},{desired:"ry",isNum:!0}];return this.attr.DirectAccess(this,t),this.center=function(t,e){return void 0===t?{cx:r.toNum(this.attr("cx")),cy:r.toNum(this.attr("cy"))}:(this.attr({cx:t,cy:e}),this)},this}t.prototype.ellipse=e,e.asEllipse=n}),t.extend(function(t,r){function e(r,e,i,o){var s=new t("line",this.dom);return s.attr({x1:r,y1:e,x2:i,y2:o}),n.call(s)}function n(){return this.origin=function(t,e){return void 0===t?{x:r.toNum(this.attr("x1")),y:r.toNum(this.attr("y1"))}:(this.attr({x1:t,y1:e}),this)},this.dest=function(t,e){return void 0===t?{x:r.toNum(this.attr("x2")),y:r.toNum(this.attr("y2"))}:(this.attr({x2:t,y2:e}),this)},this.move=function(t,e){var n=this.attr(["x1","y1","x2","y2"]);return n.x1=r.toNum(n.x1)+t,n.y1=r.toNum(n.y1)+e,n.x2=r.toNum(n.x2)+t,n.y2=r.toNum(n.y2)+e,this.attr(n),this},this}t.prototype.line=e,e.asLine=n}),t.extend(function(t,r){function e(r){var e=a(r);if(null===e)return null;var n=new t("polyline",this.dom);return n._points_array=e.points,n.attr("points",e.points_string),o.call(n)}function n(r){var e=a(r);if(null===e)return null;var n=new t("polygon",this.dom);return n._points_array=e.points,n.attr("points",e.points_string),i.call(n)}function i(){return s.call(this)}function o(){return s.call(this)}function s(){function t(t){return t<-this._points_array.length/2?!1:t>=this._points_array.length/2?!1:!0}return Object.defineProperty(this,"numPoints",{get:function(){return this._points_array.length/2}}),this.points=function(t){if(void 0===t)return this._points_array;var r=a(t);return this._points_array=r.points,this.attr("points",r.points_string),this},this.add=function(t,r,e){if(t<-this._points_array.length/2)return this;if(t>this._points_array.length/2)return this;0>t&&(t=this._points_array.length/2+t);var n=this._points_array;return Array.prototype.splice.call(n,2*t,0,r,e),this.attr("points",n.join(" ")),this},this.remove=function(r){if(t.call(this,r)===!1)return this;0>r&&(r=this._points_array.length/2+r);var e=this._points_array;return Array.prototype.splice.call(e,2*r,2),this.attr("points",e.join(" ")),this},this.point=function(r,e,n){if(t.call(this,r)===!1)return null;if(0>r&&(r=this._points_array.length/2+r),void 0===e)return{x:this._points_array[2*r],y:this._points_array[2*r+1]};var i=this._points_array;return i[2*r]=e,i[2*r+1]=n,this.attr("points",i.join(" ")),this},this.move=function(r,e,n,i){if(void 0!==n&&t.call(this,n)===!1)return this;if(void 0!==i&&t.call(this,i)===!1)return this;void 0===n&&(n=0),void 0===i&&(i=this._points_array.length/2);for(var o=this._points_array,s=2*i,a=2*n;s>a;a+=2)o[a]+=r,o[a+1]+=e;return this.attr("points",o.join(" ")),this},this}function a(t){if(void 0===t||null===t)return null;var e=t,n="";return r.is(t,"array")?(e=t,n=e.join(" ")):r.is(t,"string")&&(n=e,e=n.split(r.regex.split_seperator).map(function(t){return r.toNum(t)})),e.length%2!==0?(console.error("Require an even number of numbers"),null):{points:e,points_string:n}}t.prototype.polyline=e,t.prototype.polygon=n,e.asPolyline=o,n.asPolygon=i}),t.extend(function(t,r){function e(r){var e=new t("path",this.dom);return e._path_cmds=n(r),e.attr("d",i(e._path_cmds)),o.call(e)}function n(t){if(void 0===t||null===t)return null;var e={m:2,l:2,v:1,h:1,z:0,c:6,s:4,q:4,t:2,a:7},n=[];return t.replace(r.regex.pathCommand,function(t,i,o){if(void 0!==i&&null!==i&&void 0!==o&&null!==o&&void 0!==e[i.toLowerCase()]){var s={name:i,values:[]};o.replace(r.regex.values,function(t,r){r&&s.values.push(+r)}),s.values.length<e[i.toLowerCase()]||n.push(s)}}),n}function i(t){for(var r="",e=t.length,n=0;e>n;++n){var i=t[n].name;t[n].values.length>0&&(i+=" "+t[n].values.join(" ")),r=r+i+" "}return r}function o(){return this.d=function(t){return void 0===t?this.attr("d"):(this._path_cmds=n(d),this.attr("d",i(this._path_cmds)))},this.move=function(t,e){for(var n,o,s=this._path_cmds,a=s.length,n=0;a>n;++n)if(r.isUpperCase(s[n].name)){var u=s[n].name,c=s[n].values,l=c.length;if("A"===u)c[5]+=t,c[6]+=e;else if("V"===u)c[0]+=e;else if("H"===u)c[0]+=t;else for(o=0;l>o;o+=2)c[o]+=t,c[o+1]+=e}return this.attr("d",i(this._path_cmds)),this},this.insert=function(t,r){if(t<-this._path_cmds.length)return this;if(t>this._path_cmds.length)return this;0>t&&(t=this._path_cmds.length+t);var e=n(r),o=this._path_cmds.slice(0,t),s=this._path_cmds.slice(t);return this._path_cmds=o.concat(e).concat(s),this.attr("d",i(this._path_cmds)),this},this.remove=function(t){return t<-this._path_cmds.length?this:t>=this._path_cmds.length?this:(0>t&&(t=this._path_cmds.length+t),Array.prototype.splice.call(this._path_cmds,t,1),this.attr("d",i(this._path_cmds)),this)},this.point=function(t){return t<-this._path_cmds.length?this:t>=this._path_cmds.length?this:(0>t&&(t=this._path_cmds.length+t),s(this._path_cmds[t]),this._path_cmds[t])},this.save=function(){return this.attr("d",i(this._path_cmds))},this}function s(t){function r(r){return 0>r?t.values.length+r:r}function e(e){return function(n){return void 0===n?t.values[r(e)]:(t.values[r(e)]=n,t)}}function n(e){return function(n,i){return void 0===n?{x:t.values[r(e[0])],y:t.values[r(e[1])]}:(t.values[r(e[0])]=n,t.values[r(e[1])]=i,t)}}function i(r){return function(e){return void 0===e?!!t.values[r]:(t.values[r]=e?1:0,t)}}var o={x:0,y:1,c1:[0,1],c2:[2,3],end:[-2,-1]},s=t.name.toLowerCase();"v"===s?o.y=0:"h"===s?o.x=0:"a"===s&&(o.x=-2,o.y=-1),t.c1=n(o.c1),t.c2=n(o.c2),t.end=n(o.end),t.x=e(o.x),t.y=e(o.y),"a"===s&&(t.rx=e(0),t.ry=e(1),t.rotation=e(2),t.largeArc=i(3),t.clockwise=i(4))
}t.prototype.path=e,e.asPath=o}),t.extend(function(t,r,e){function n(r,e,n,o,s){var a=new t("use",this.dom);return void 0!==r&&("#"!==r.charAt(0)&&(r="#"+r),a.attr("xlink:href",r,t.prototype.xlink_ns),void 0!==e&&a.attr("x",e),void 0!==n&&a.attr("y",n),void 0!==o&&a.attr("width",o),void 0!==s&&a.attr("height",s)),i.call(a)}function i(){var t=[{desired:"x",isNum:!0},{desired:"y",isNum:!0},{desired:"width",isNum:!0},{desired:"height",isNum:!0}];return this.attr.DirectAccess(this,t),e.common.asXlinkable.call(this),this}t.prototype.use=n,n.asUse=i}),t.extend(function(t){function r(r,n,i,o,s){var a=new t("image",this.dom);return void 0!==r&&a.attr("xlink:href",r,t.prototype.xlink_ns),void 0!==n&&a.attr("x",n),void 0!==i&&a.attr("x",i),void 0!==o&&a.attr("width",o),void 0!==s&&a.attr("height",s),e.call(a)}function e(){var r=[{desired:"x",isNum:!0},{desired:"y",isNum:!0},{desired:"width",isNum:!0},{desired:"height",isNum:!0}];return this.attr.DirectAccess(this,r),this.href=function(r){return void 0===r?this.attr("xlink:href"):void this.attr("xlink:href",r,t.prototype.xlink_ns)},this.preserveAspectRatio=function(t,r,e){return r=void 0===r?"":r,e(e===udnefined)?"":e,this.attr("preserveAspectRatio",r+" "+t+" "+e),this},this}t.prototype.image=r,r.asImage=e}),t.extend(function(t,r){function e(r,e,n){var i=new t("text",this.dom);return void 0!==e&&void 0!==n&&i.attr({x:e,y:n}),void 0===r&&(r=""),i._text_textNode=t.prototype.createTextNode(r),i.dom.appendChild(i._text_textNode),s.call(i)}function n(r,e){if(void 0===e&&(e=""),r.dom.contains(r._text_textNode))r._text_textNode.nodeValue=e;else{for(var n=r.dom.childNodes,i=n.length,o=!1,s=0;i>s;++s)if("#text"===n[s].nodeName){r._text_textNode=n[s],o=!0;break}o===!1&&(r._text_textNode=t.prototype.createTextNode(e)),r.dom.appendChild(r._text_textNode)}}function i(t,r){if(t.hasChildNodes()===!1)return"#text"===t.nodeName?t.nodeValue:"";for(var e="",n=t.childNodes,o=n.length,s=0;o>s;++s)r?e+=i(n[s],r):"#text"===n[s].nodeName&&(e+=n[s].nodeValue);return e}function o(t,r){return r?i(t.dom,!0):t.dom.contains(t._text_textNode)?t._text_textNode.nodeValue:""}function s(){this.text=function(t){return void 0===t||r.is(t,"boolean")?o(this,t):(n(this,t),this)},this.x=function(t){return r.toNum(this.attr("x",t))},this.y=function(t){return r.toNum(this.attr("y",t))};var t=[{desired:"anchor",real:"text-anchor"},{desired:"decoration",real:"text-decoration"},{desired:"rendering",real:"text-rendering",isNum:!0},{desired:"textLength",real:"textLength",isNum:!0},{desired:"lengthAdjust",real:"lengthAdjust"},{desired:"kerning",real:"kerning",isNum:!0},{desired:"letter_spacing",real:"letter-spacing",isNum:!0},{desired:"word_spacing",real:"word-spacing",isNum:!0},{desired:"writing_mode",real:"writing-mode"},{desired:"glyph_orientation_vertical",real:"glyph-orientation-vertical",isNum:!0},{desired:"direction",real:"direction"}];return this.attr.DirectAccess(this,t),this}t.prototype.text=e,e.asText=s}),t.extend(function(t,r,e){function n(r,e,n){var o=new t("tspan",this.dom);return i.call(o),void 0!==r&&o.text(r),void 0!==e&&o.dx(e),void 0!==e&&o.dy(n),o}function i(){return c.call(this),this}function o(r,e,n){var i=new t("tref",this.dom);return s.call(i),void 0!==r&&i.href(r),void 0!==e&&i.dx(e),void 0!==n&&i.dy(n),i}function s(){return c.call(this),e.common.asXlinkable.call(this),this}function a(r,e){var n=new t("textPath",this.dom);return u.call(n),n.href(r),void 0!==e&&n.text(e),n}function u(){return c.call(this),e.common.asXlinkable.call(this),this}function c(){t.prototype.text.asText.call(this);for(var e=["dx","dy"],n=0;n<e.length;++n)this[e[n]]=function(t,e){return function(n){if(void 0===n){var i=t.attr(e);return i=i.split(r.regex.split_seperator).map(function(t){return r.toNum(t)})}return r.is(n,"array")?t.attr(e,n.join(" ")):(r.is(n,"string")||r.is(n,"number"))&&t.attr(e,n),t}}(this,e[n]);return function(t){t.baseline=function(){},t.baseline.shift=function(r){return t.attr("baseline-shift",r)},t.baseline.alignment=function(r){return t.attr("alignment-baseline",r)},t.baseline.dominant=function(r){return t.attr("dominant-baseline",r)}}(this),this}t.prototype.tspan=n,t.prototype.tref=o,t.prototype.textPath=a,n.asTspan=i,o.asTref=s,a.asTextPath=u}),t});